<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Wonders: Fascinating Facts</title>
    <style>
        :root {
            /* Default Theme Colors (will be overridden by JS) */
            --bg-gradient: linear-gradient(135deg, #0A001A, #26004D); /* Deep Purple/Blue for Diamond Planet */
            --text-color: #E0FFFF; /* Light Cyan for Diamond sparkle */
            --footer-bg: #050010; /* Darker for footer */
            --glass-bg: rgba(10, 0, 26, 0.6);
            --glass-border: rgba(224, 255, 255, 0.4);
            --fact-text-shadow: 2px 2px 15px rgba(0,0,0,0.9);
            --title-color: #E0FFFF; /* Light Cyan */
            --title-shadow: 4px 4px 25px rgba(0, 0, 0, 0.9);
            --button-primary: #4B0082; /* Indigo */
            --button-hover: #6A5ACD; /* Slate Blue */
            --main-action-btn: #E0FFFF; /* Light Cyan */
            --main-action-btn-hover: #AFEEEE; /* Pale Turquoise */
            --quiz-option-btn: #4B0082;
            --quiz-option-btn-hover: #6A5ACD;
            --quiz-correct: #32CD32;
            --quiz-incorrect: #FF4500;
            --challenge-timer-progress: #E0FFFF;
            --challenge-streak-color: #ADFF2F;
            --history-toggle-color: #E0FFFF; /* Light Cyan for footer text */
            --history-list-color: #B0E0E6; /* Powder Blue */
            --reveal-overlay-color: rgba(0, 0, 0, 0.8); /* Dark overlay for hidden fact */
        }

        body {
            background: var(--bg-gradient);
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
            transition: background 0.8s ease-in-out, color 0.5s ease;
            overflow-x: hidden;
        }
        .container {
            max-width: 1000px;
            width: 100%;
            margin-bottom: 20px;
            padding: 50px;
            background-color: var(--glass-bg);
            border-radius: 25px;
            box-shadow: 0 15px 50px 0 rgba( 0, 0, 0, 0.5 );
            backdrop-filter: blur( 12px );
            -webkit-backdrop-filter: blur( 12px );
            border: 1px solid var(--glass-border);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        .container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(255,255,255,0.08) 10%, transparent 70%);
            animation: rotateBackground 25s linear infinite;
            opacity: 0.4;
        }
        @keyframes rotateBackground {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        h1#main-title {
            font-size: 6rem;
            margin-bottom: 3rem;
            text-shadow: var(--title-shadow);
            color: var(--title-color);
            letter-spacing: 4px;
            font-weight: 900;
        }
        .fact-card {
            background-color: rgba(10, 0, 20, 0.7);
            padding: 45px;
            border-radius: 25px;
            margin-bottom: 35px;
            width: 90%;
            max-width: 850px;
            box-shadow: 0 0 40px rgba(0,0,0,0.7), inset 0 0 20px rgba(0,0,0,0.7);
            position: relative;
            overflow: hidden;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        p {
            font-size: 2.8rem;
            line-height: 1.6;
            margin-bottom: 2.5rem;
            cursor: default;
            transition: transform 0.3s ease-in-out, color 0.3s ease-in-out;
            text-shadow: var(--fact-text-shadow);
            font-weight: 600;
        }
        #main-fact, #quiz-fact, #challenge-fact {
            animation: fadeInScale 1.5s ease-out forwards;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes slideInFromBottom {
            from { transform: translateY(120%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        #footer-info {
            font-size: 1.5rem;
            color: var(--history-toggle-color);
            background-color: var(--footer-bg);
            padding: 25px 50px;
            border-radius: 20px;
            opacity: 0.98;
            margin-top: 50px;
            animation: slideInFromBottom 1s ease-out forwards;
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.5);
            font-weight: 700;
            transition: background-color 0.5s ease, color 0.5s ease;
        }
        #fact-of-the-day-container {
            margin-top: 30px;
            margin-bottom: 30px;
            padding: 35px 45px;
            background-color: var(--glass-bg);
            border-radius: 25px;
            box-shadow: 0 10px 35px rgba(0,0,0,0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            cursor: default;
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
            max-width: 900px;
            width: 90%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }
        #fact-of-the-day-text {
            font-size: 2.6rem;
            color: var(--text-color);
            background-color: transparent;
            padding: 15px 25px;
            border-radius: 12px;
            font-style: italic;
            font-weight: 700;
            text-shadow: var(--fact-text-shadow);
            transition: color 1s ease, background-color 1s ease, filter 1s ease, opacity 1s ease;
            line-height: 1.5;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        #fact-of-the-day-text.hidden-fact {
            filter: blur(10px);
            opacity: 0.2;
            color: transparent;
            text-shadow: none;
        }
        #fact-of-the-day-text::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--reveal-overlay-color);
            border-radius: 12px;
            opacity: 0;
            transition: opacity 1s ease;
            z-index: -1;
        }
        #fact-of-the-day-text.hidden-fact::before {
            opacity: 1;
        }
        #did-you-know {
            margin-top: 30px;
            padding-top: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.3);
            text-align: left;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 1s ease-out, opacity 1s ease-out, transform 1s ease-out;
            transform: translateY(30px);
        }
        #did-you-know.show-did-you-know {
            max-height: 350px;
            opacity: 1;
            transform: translateY(0);
        }
        #did-you-know h3 {
            font-size: 1.8rem;
            color: hsl(40, 100%, 80%);
            margin-bottom: 12px;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.4);
        }
        #did-you-know-content {
            font-size: 1.3rem;
            color: var(--history-list-color);
            line-height: 1.6;
            margin-bottom: 0;
        }

        /* Quiz Specific Styles */
        #fact-challenge-area h2 {
            font-size: 3.2rem;
            margin-bottom: 2rem;
            color: var(--title-color);
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
        }
        #quiz-fact, #challenge-fact {
            font-size: 2rem;
            margin-bottom: 3rem;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #challenge-options {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        .challenge-option-btn {
            background-color: var(--quiz-option-btn);
            color: #FFFFFF;
            padding: 18px 35px;
            font-size: 1.3rem;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            min-width: 160px;
            box-shadow: 0 5px 12px rgba(0,0,0,0.3);
        }
        .challenge-option-btn:hover {
            background-color: var(--quiz-option-btn-hover);
            transform: translateY(-4px);
        }
        .challenge-option-btn.correct {
            background-color: var(--quiz-correct);
            box-shadow: 0 0 20px var(--quiz-correct);
        }
        .challenge-option-btn.incorrect {
            background-color: var(--quiz-incorrect);
            box-shadow: 0 0 20px var(--quiz-incorrect);
        }
        .quiz-feedback {
            font-size: 1.6rem;
            margin-top: 25px;
            font-weight: 800;
            animation: fadeIn 0.6s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Challenge Specific Styles */
        #challenge-timer-bar {
            width: 100%;
            height: 12px;
            background-color: rgba(255,255,255,0.25);
            border-radius: 6px;
            margin-bottom: 25px;
            overflow: hidden;
        }
        #challenge-timer-progress {
            height: 100%;
            width: 100%;
            background-color: var(--challenge-timer-progress);
            border-radius: 6px;
            transition: width linear;
        }
        #challenge-score {
            font-size: 2rem;
            color: var(--challenge-streak-color);
            margin-bottom: 20px;
            font-weight: 800;
            text-shadow: 1px 1px 6px rgba(0,0,0,0.5);
        }
        #challenge-feedback {
            font-size: 1.8rem;
            margin-top: 25px;
            font-weight: 800;
            animation: fadeIn 0.6s ease-out;
        }

        /* History Section */
        #history-section {
            margin-top: 35px;
            width: 100%;
            max-width: 850px;
            text-align: left;
        }
        #history-toggle-btn {
            background-color: var(--button-primary);
            color: var(--history-toggle-color);
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            margin-bottom: 25px;
            box-shadow: 0 5px 12px rgba(0,0,0,0.3);
        }
        #history-toggle-btn:hover {
            background-color: var(--button-hover);
            transform: translateY(-3px);
        }
        #history-list {
            list-style: none;
            padding: 0;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 1s ease-out, opacity 1s ease-out;
            background-color: rgba(255, 255, 255, 0.08);
            border-radius: 18px;
            padding: 0 25px;
            box-shadow: inset 0 0 12px rgba(0,0,0,0.3);
        }
        #history-list.show-history {
            max-height: 600px;
            opacity: 1;
            padding: 25px;
        }
        #history-list li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            color: var(--history-list-color);
            font-size: 1.1rem;
        }
        #history-list li:last-child {
            border-bottom: none;
        }

        /* Buttons */
        .btn {
            background-color: var(--button-primary);
            color: #FFFFFF;
            padding: 18px 35px;
            font-size: 1.3rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            margin: 12px;
            box-shadow: 0 5px 12px rgba(0,0,0,0.3);
        }
        .btn:hover {
            background-color: var(--button-hover);
            transform: translateY(-4px);
        }
        .main-action-btn {
            background-color: var(--main-action-btn);
            font-size: 1.6rem;
            padding: 20px 40px;
            font-weight: 800;
            letter-spacing: 1.5px;
            color: var(--button-primary); /* Text color for main action button */
        }
        .main-action-btn:hover {
            background-color: var(--main-action-btn-hover);
            transform: translateY(-5px) scale(1.03);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            h1#main-title {
                font-size: 4rem;
                margin-bottom: 2rem;
            }
            .container {
                padding: 25px;
            }
            .fact-card {
                padding: 30px;
                min-height: 250px;
            }
            p {
                font-size: 2rem;
                margin-bottom: 2rem;
            }
            #fact-of-the-day-text {
                font-size: 2rem;
            }
            #footer-info {
                font-size: 1.1rem;
                padding: 18px 30px;
            }
            .btn, .challenge-option-btn {
                padding: 15px 25px;
                font-size: 1.1rem;
            }
            .main-action-btn {
                font-size: 1.3rem;
                padding: 18px 30px;
            }
            #did-you-know h3 {
                font-size: 1.6rem;
            }
            #did-you-know-content {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="main-title">Cosmic Wonders</h1>

        <div id="fact-of-the-day-container">
            <p id="fact-of-the-day-text" class="hidden-fact"></p>
            <div id="challenge-buttons" style="margin-top: 20px;">
                <button id="reveal-fact-btn" class="btn main-action-btn">Reveal Fact</button>
                <button id="generate-fact-btn" class="btn">Generate New Fact</button>
            </div>
            <div id="did-you-know">
                <h3>Did You Know?</h3>
                <p id="did-you-know-content"></p>
            </div>
            <p id="reveal-message" style="font-size: 1.4rem; color: var(--challenge-streak-color); margin-top: 15px; display: none;"></p>
        </div>

        <!-- New Feature: Fact Quiz -->
        <div id="fact-challenge-area" class="fact-card" style="margin-top: 40px; display: none;">
            <h2>Fact Quiz!</h2>
            <div id="challenge-score" style="font-size: 1.8rem; color: var(--challenge-streak-color); margin-bottom: 15px; font-weight: 700; text-shadow: 1px 1px 5px rgba(0,0,0,0.4);">Score: 0</div>
            <div id="challenge-timer-bar">
                <div id="challenge-timer-progress"></div>
            </div>
            <p id="challenge-question" style="font-size: 1.8rem; margin-bottom: 20px;">Is this statement true or false?</p>
            <p id="challenge-fact" style="font-size: 2.2rem; font-weight: 700;"></p>
            <div id="challenge-options">
                <button class="challenge-option-btn" data-answer="true">True</button>
                <button class="challenge-option-btn" data-answer="false">False</button>
            </div>
            <p id="challenge-feedback" style="display: none;"></p>
            <button id="next-challenge-btn" class="btn" style="display: none; margin-top: 20px;">Next Fact</button>
        </div>

        <div id="history-section">
            <button id="history-toggle-btn">Show Fact History</button>
            <ul id="history-list">
                <!-- History items will be added here by JavaScript -->
            </ul>
        </div>
    </div>

    <footer id="footer-info">
        <p>&copy; 2025 Cosmic Wonders. All rights reserved.</p>
    </footer>

    <script>
        const factOfTheDayText = document.getElementById('fact-of-the-day-text');
        const revealFactBtn = document.getElementById('reveal-fact-btn');
        const generateFactBtn = document.getElementById('generate-fact-btn');
        const didYouKnow = document.getElementById('did-you-know');
        const didYouKnowContent = document.getElementById('did-you-know-content');
        const historyToggleBtn = document.getElementById('history-toggle-btn');
        const historyList = document.getElementById('history-list');
        const factChallengeArea = document.getElementById('fact-challenge-area');
        const challengeFact = document.getElementById('challenge-fact');
        const challengeOptions = document.getElementById('challenge-options');
        const challengeFeedback = document.getElementById('challenge-feedback');
        const nextChallengeBtn = document.getElementById('next-challenge-btn');
        const mainTitle = document.getElementById('main-title');
        const footerInfo = document.getElementById('footer-info');
        const revealMessage = document.getElementById('reveal-message');

        const facts = [
            {
                main: "Neutron stars are so dense that a sugar cube-sized amount of their material would weigh more than all of humanity.",
                didYouKnow: "A neutron star is the collapsed core of a massive supergiant star, which was between 10 and 29 solar masses, at the end of its life cycle.",
                isTrue: true,
                theme: {
                    bgGradient: 'linear-gradient(135deg, #1A0033, #330066)',
                    textColor: '#FFD700',
                    footerBg: '#0D0026',
                    glassBg: 'rgba(26, 0, 51, 0.6)',
                    glassBorder: 'rgba(255, 215, 0, 0.4)',
                    titleColor: '#FFD700',
                    buttonPrimary: '#4A0080',
                    buttonHover: '#6600CC',
                    mainActionBtn: '#FFD700',
                    mainActionBtnHover: '#FFC400',
                    quizOptionBtn: '#330066',
                    quizOptionBtnHover: '#4D0099',
                    quizCorrect: '#32CD32',
                    quizIncorrect: '#FF4500',
                    challengeTimerProgress: '#FFD700',
                    challengeStreakColor: '#ADFF2F',
                    historyToggleColor: '#E0E0FF',
                    historyListColor: '#B0C4DE'
                }
            },
            {
                main: "A day on Venus is longer than its year.",
                didYouKnow: "Venus rotates extremely slowly, taking about 243 Earth days to complete one rotation, while its orbit around the Sun takes about 225 Earth days.",
                isTrue: true,
                theme: {
                    bgGradient: 'linear-gradient(135deg, #4B0082, #8A2BE2)', // Indigo to Blue Violet
                    textColor: '#FFD700', // Gold
                    footerBg: '#3A0066',
                    glassBg: 'rgba(75, 0, 130, 0.6)',
                    glassBorder: 'rgba(255, 215, 0, 0.4)',
                    titleColor: '#FFD700',
                    buttonPrimary: '#6A00B0',
                    buttonHover: '#9932CC',
                    mainActionBtn: '#FFD700',
                    mainActionBtnHover: '#FFC400',
                    quizOptionBtn: '#6A00B0',
                    quizOptionBtnHover: '#9932CC',
                    quizCorrect: '#32CD32',
                    quizIncorrect: '#FF4500',
                    challengeTimerProgress: '#FFD700',
                    challengeStreakColor: '#ADFF2F',
                    historyToggleColor: '#E0E0FF',
                    historyListColor: '#B0C4DE'
                }
            },
            {
                main: "The Sun is a green star.",
                didYouKnow: "While the Sun emits light across the entire visible spectrum, its peak emission is in the green part. However, due to how our eyes perceive light, it appears white or yellow.",
                isTrue: false,
                theme: {
                    bgGradient: 'linear-gradient(135deg, #FFD700, #FFA500)', // Gold to Orange
                    textColor: '#333333', // Dark Grey
                    footerBg: '#CCAA00',
                    glassBg: 'rgba(255, 215, 0, 0.6)',
                    glassBorder: 'rgba(51, 51, 51, 0.4)',
                    titleColor: '#333333',
                    buttonPrimary: '#FF8C00',
                    buttonHover: '#FF6347',
                    mainActionBtn: '#333333',
                    mainActionBtnHover: '#666666',
                    quizOptionBtn: '#FF8C00',
                    quizOptionBtnHover: '#FF6347',
                    quizCorrect: '#32CD32',
                    quizIncorrect: '#FF4500',
                    challengeTimerProgress: '#333333',
                    challengeStreakColor: '#ADFF2F',
                    historyToggleColor: '#333333',
                    historyListColor: '#696969'
                }
            },
            {
                main: "There are more stars in the universe than grains of sand on all the beaches on Earth.",
                didYouKnow: "Scientists estimate there are about 100 billion to 400 billion stars in our Milky Way galaxy alone, and there are billions of galaxies in the observable universe.",
                isTrue: true,
                theme: {
                    bgGradient: 'linear-gradient(135deg, #000033, #000066)', // Dark Blue
                    textColor: '#ADD8E6', // Light Blue
                    footerBg: '#000022',
                    glassBg: 'rgba(0, 0, 51, 0.6)',
                    glassBorder: 'rgba(173, 216, 230, 0.4)',
                    titleColor: '#ADD8E6',
                    buttonPrimary: '#4169E1', // Royal Blue
                    buttonHover: '#6495ED', // Cornflower Blue
                    mainActionBtn: '#ADD8E6',
                    mainActionBtnHover: '#B0E0E6', // Powder Blue
                    quizOptionBtn: '#4169E1',
                    quizOptionBtnHover: '#6495ED',
                    quizCorrect: '#32CD32',
                    quizIncorrect: '#FF4500',
                    challengeTimerProgress: '#ADD8E6',
                    challengeStreakColor: '#ADFF2F',
                    historyToggleColor: '#ADD8E6',
                    historyListColor: '#87CEEB' // Sky Blue
                }
            },
            {
                main: "A black hole is a region of spacetime where gravity is so strong that nothing—no particles or even electromagnetic radiation such as light—can escape from it.",
                didYouKnow: "The theory of general relativity predicts that a sufficiently compact mass can deform spacetime to form a black hole.",
                isTrue: true,
                theme: {
                    bgGradient: 'linear-gradient(135deg, #000000, #1A1A1A)', // Black to Very Dark Grey
                    textColor: '#F5F5DC', // Beige
                    footerBg: '#000000',
                    glassBg: 'rgba(0, 0, 0, 0.7)',
                    glassBorder: 'rgba(245, 245, 220, 0.4)',
                    titleColor: '#F5F5DC',
                    buttonPrimary: '#2F4F4F', // Dark Slate Gray
                    buttonHover: '#696969', // Dim Gray
                    mainActionBtn: '#F5F5DC',
                    mainActionBtnHover: '#E0E0D0',
                    quizOptionBtn: '#2F4F4F',
                    quizOptionBtnHover: '#696969',
                    quizCorrect: '#32CD32',
                    quizIncorrect: \'#FF4500\',
                    challengeTimerProgress: '#F5F5DC',
                    challengeStreakColor: '#ADFF2F',
                    historyToggleColor: '#F5F5DC',
                    historyListColor: '#C0C0C0' // Silver
                }
            },
            {
                main: "The largest known structure in the universe is the Hercules-Corona Borealis Great Wall.",
                didYouKnow: "This immense structure is a galactic filament, a vast association of galaxies, spanning over 10 billion light-years.",
                isTrue: true,
                theme: {
                    bgGradient: 'linear-gradient(135deg, #2C003E, #5A0080)', // Dark Violet to Deep Purple
                    textColor: '#E6E6FA', // Lavender
                    footerBg: '#1E002B',
                    glassBg: 'rgba(44, 0, 62, 0.6)',
                    glassBorder: 'rgba(230, 230, 250, 0.4)',
                    titleColor: '#E6E6FA',
                    buttonPrimary: '#8A2BE2', // Blue Violet
                    buttonHover: '#9370DB', // Medium Purple
                    mainActionBtn: '#E6E6FA',
                    mainActionBtnHover: '#D8BFD8', // Thistle
                    quizOptionBtn: '#8A2BE2',
                    quizOptionBtnHover: '#9370DB',
                    quizCorrect: '#32CD32',
                    quizIncorrect: '#FF4500',
                    challengeTimerProgress: '#E6E6FA',
                    challengeStreakColor: '#ADFF2F',
                    historyToggleColor: '#E6E6FA',
                    historyListColor: '#DDA0DD' // Plum
                }
            },
            {
                main: "It rains diamonds on Jupiter and Saturn.",
                didYouKnow: "Scientists believe that in the atmospheres of Jupiter and Saturn, lightning storms turn methane into soot, which is then compressed into graphite and then diamonds as it falls.",
                isTrue: true,
                theme: {
                    bgGradient: 'linear-gradient(135deg, #2F4F4F, #4682B4)', // Dark Slate Gray to Steel Blue
                    textColor: '#E0FFFF', // Light Cyan
                    footerBg: '#223333',
                    glassBg: 'rgba(47, 79, 79, 0.6)',
                    glassBorder: 'rgba(224, 255, 255, 0.4)',
                    titleColor: '#E0FFFF',
                    buttonPrimary: '#5F9EA0', // Cadet Blue
                    buttonHover: '#7FFFD4', // Aquamarine
                    mainActionBtn: '#E0FFFF',
                    mainActionBtnHover: '#AFEEEE', // Pale Turquoise
                    quizOptionBtn: '#5F9EA0',
                    quizOptionBtnHover: '#7FFFD4',
                    quizCorrect: '#32CD32',
                    quizIncorrect: '#FF4500',
                    challengeTimerProgress: '#E0FFFF',
                    challengeStreakColor: '#ADFF2F',
                    historyToggleColor: '#E0FFFF',
                    historyListColor: '#B0E0E6' // Powder Blue
                }
            },
            {
                main: "The Earth is perfectly round.",
                didYouKnow: "The Earth is an oblate spheroid, meaning it bulges at the equator and is flattened at the poles due to its rotation.",
                isTrue: false,
                theme: {
                    bgGradient: 'linear-gradient(135deg, #004D00, #008000)', // Dark Green to Green
                    textColor: '#F0FFF0', // Honeydew
                    footerBg: '#003300',
                    glassBg: 'rgba(0, 77, 0, 0.6)',
                    glassBorder: 'rgba(240, 255, 240, 0.4)',
                    titleColor: '#F0FFF0',
                    buttonPrimary: '#3CB371', // Medium Sea Green
                    buttonHover: '#66CDAA', // Medium Aquamarine
                    mainActionBtn: '#F0FFF0',
                    mainActionBtnHover: '#98FB98', // Pale Green
                    quizOptionBtn: '#3CB371',
                    quizOptionBtnHover: '#66CDAA',
                    quizCorrect: '#32CD32',
                    quizIncorrect: '#FF4500',
                    challengeTimerProgress: '#F0FFF0',
                    challengeStreakColor: '#ADFF2F',
                    historyToggleColor: '#F0FFF0',
                    historyListColor: '#C1FFC1' // Light Green
                }
            },
            {
                main: "There is a planet made entirely of diamonds.",
                didYouKnow: "Discovered in 2004, '55 Cancri e' is a super-Earth exoplanet that is thought to have a significant portion of its mass as diamond.",
                isTrue: true,
                theme: {
                    bgGradient: 'linear-gradient(135deg, #0A001A, #26004D)', // Deep Purple/Blue
                    textColor: '#E0FFFF', // Light Cyan (Diamond sparkle)
                    footerBg: '#050010',
                    glassBg: 'rgba(10, 0, 26, 0.6)',
                    glassBorder: 'rgba(224, 255, 255, 0.4)',
                    titleColor: '#E0FFFF',
                    buttonPrimary: '#4B0082', // Indigo
                    buttonHover: '#6A5ACD', // Slate Blue
                    mainActionBtn: '#E0FFFF',
                    mainActionBtnHover: '#AFEEEE', // Pale Turquoise
                    quizOptionBtn: '#4B0082',
                    quizOptionBtnHover: '#6A5ACD',
                    quizCorrect: '#32CD32',
                    quizIncorrect: '#FF4500',
                    challengeTimerProgress: '#E0FFFF',
                    challengeStreakColor: '#ADFF2F',
                    historyToggleColor: '#E0FFFF',
                    historyListColor: '#B0E0E6' // Powder Blue
                }
            },
            {
                main: "The observable universe is smaller than a single atom.",
                didYouKnow: "The observable universe is vast, spanning billions of light-years, and is significantly larger than any atom.",
                isTrue: false,
                theme: {
                    bgGradient: 'linear-gradient(135deg, #000000, #0F0F0F)', // Pure Black to Dark Grey
                    textColor: '#FFFFFF', // White
                    footerBg: '#000000',
                    glassBg: 'rgba(0, 0, 0, 0.7)',
                    glassBorder: 'rgba(255, 255, 255, 0.4)',
                    titleColor: '#FFFFFF',
                    buttonPrimary: '#333333',
                    buttonHover: '#555555',
                    mainActionBtn: '#FFFFFF',
                    mainActionBtnHover: '#CCCCCC',
                    quizOptionBtn: '#333333',
                    quizOptionBtnHover: '#555555',
                    quizCorrect: '#32CD32',
                    quizIncorrect: '#FF4500',
                    challengeTimerProgress: '#FFFFFF',
                    challengeStreakColor: '#ADFF2F',
                    historyToggleColor: '#FFFFFF',
                    historyListColor: '#BBBBBB'
                }
            }
        ];

        let currentFact = facts[6]; // Set initial fact to "It rains diamonds on Jupiter and Saturn."
        let factHistory = [];
        let revealTimer;
        const revealDuration = 3000; // 3 seconds for reveal

        function applyTheme(theme) {
            const root = document.documentElement;
            for (const [key, value] of Object.entries(theme)) {
                root.style.setProperty(`--${key}`, value);
            }
            mainTitle.style.color = theme.titleColor;
            footerInfo.style.backgroundColor = theme.footerBg;
            footerInfo.style.color = theme.historyToggleColor; // Use historyToggleColor for footer text
        }

        function updateFactDisplay() {
            factOfTheDayText.textContent = currentFact.main;
            didYouKnowContent.textContent = currentFact.didYouKnow;
            factOfTheDayText.classList.add('hidden-fact'); // Start hidden for reveal challenge
            didYouKnow.classList.remove('show-did-you-know'); // Did you know is hidden by default
            revealFactBtn.textContent = "Reveal Fact";
            revealMessage.style.display = 'none';
            applyTheme(currentFact.theme);
        }

        function generateRandomFact() {
            let newFact;
            do {
                newFact = facts[Math.floor(Math.random() * facts.length)];
            } while (newFact === currentFact);

            currentFact = newFact;
            updateFactDisplay();
            addToHistory(currentFact.main);
        }

        function addToHistory(fact) {
            factHistory.unshift(fact);
            renderHistory();
        }

        function renderHistory() {
            historyList.innerHTML = '';
            factHistory.forEach(fact => {
                const listItem = document.createElement('li');
                listItem.textContent = fact;
                historyList.appendChild(listItem);
            });
        }

        // Fact Challenge Logic
        let currentChallengeFact;
        let score = 0;
        let timer;
        const challengeDuration = 10; // seconds

        function startFactChallenge() {
            factChallengeArea.style.display = 'flex';
            document.getElementById('fact-of-the-day-container').style.display = 'none';
            score = 0;
            updateScoreDisplay();
            generateChallengeFact();
        }

        function updateScoreDisplay() {
            document.getElementById('challenge-score').textContent = `Score: ${score}`;
        }

        function startTimer() {
            let timeLeft = challengeDuration;
            document.getElementById('challenge-timer-progress').style.width = '100%';
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('challenge-timer-progress').style.width = `${(timeLeft / challengeDuration) * 100}%`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    challengeFeedback.textContent = "Time's up!";
                    challengeFeedback.style.color = 'var(--quiz-incorrect)';
                    challengeFeedback.style.display = 'block';
                    challengeOptions.style.pointerEvents = 'none';
                    nextChallengeBtn.style.display = 'block';
                }
            }, 1000);
        }

        function generateChallengeFact() {
            let newChallengeFact;
            do {
                newChallengeFact = facts[Math.floor(Math.random() * facts.length)];
            } while (newChallengeFact === currentChallengeFact);
            currentChallengeFact = newChallengeFact;

            challengeFact.textContent = currentChallengeFact.main;
            challengeFeedback.style.display = 'none';
            nextChallengeBtn.style.display = 'none';
            challengeOptions.style.pointerEvents = 'auto';
            Array.from(challengeOptions.children).forEach(btn => {
                btn.classList.remove('correct', 'incorrect');
            });
            startTimer();
        }

        challengeOptions.addEventListener('click', (event) => {
            const target = event.target;
            if (target.classList.contains('challenge-option-btn')) {
                clearInterval(timer);
                const userAnswer = target.dataset.answer === 'true';
                challengeOptions.style.pointerEvents = 'none';

                if (userAnswer === currentChallengeFact.isTrue) {
                    challengeFeedback.textContent = "Correct! Well done.";
                    challengeFeedback.style.color = 'var(--quiz-correct)';
                    target.classList.add('correct');
                    score++;
                } else {
                    challengeFeedback.textContent = "Incorrect. The correct answer was " + (currentChallengeFact.isTrue ? "True" : "False") + ".";
                    challengeFeedback.style.color = 'var(--quiz-incorrect)';
                    target.classList.add('incorrect');
                    Array.from(challengeOptions.children).find(btn => (btn.dataset.answer === 'true') === currentChallengeFact.isTrue).classList.add('correct');
                }
                updateScoreDisplay();
                challengeFeedback.style.display = 'block';
                nextChallengeBtn.style.display = 'block';
            }
        });

        nextChallengeBtn.addEventListener('click', generateChallengeFact);

        // Event Listeners
        revealFactBtn.addEventListener('click', () => {
            if (factOfTheDayText.classList.contains('hidden-fact')) {
                // Start reveal challenge
                let startTime = Date.now();
                revealFactBtn.textContent = "Revealing...";
                revealFactBtn.disabled = true;
                revealMessage.style.display = 'block';
                revealMessage.textContent = 'Click again for a perfect reveal!';

                revealTimer = setTimeout(() => {
                    factOfTheDayText.classList.remove('hidden-fact');
                    revealFactBtn.textContent = "Explore Details";
                    revealFactBtn.disabled = false;
                    revealMessage.style.display = 'none';
                    didYouKnow.classList.add('show-did-you-know');
                }, revealDuration);

                // Allow for "perfect reveal" click
                const perfectRevealHandler = () => {
                    clearTimeout(revealTimer);
                    factOfTheDayText.classList.remove('hidden-fact');
                    revealFactBtn.textContent = "Explore Details";
                    revealFactBtn.disabled = false;
                    revealMessage.textContent = 'Perfect Reveal! You\'ve got quick reflexes!';
                    didYouKnow.classList.add('show-did-you-know');
                    revealFactBtn.removeEventListener('click', perfectRevealHandler); // Remove handler after first click
                };
                revealFactBtn.addEventListener('click', perfectRevealHandler, { once: true }); // Listen for one more click
            } else {
                // Toggle did you know section
                didYouKnow.classList.toggle('show-did-you-know');
                if (didYouKnow.classList.contains('show-did-you-know')) {
                    revealFactBtn.textContent = "Hide Details";
                } else {
                    revealFactBtn.textContent = "Explore Details";
                }
            }
        });

        generateFactBtn.addEventListener('click', generateRandomFact);

        historyToggleBtn.addEventListener('click', () => {
            historyList.classList.toggle('show-history');
            if (historyList.classList.contains('show-history')) {
                historyToggleBtn.textContent = "Hide Fact History";
            } else {
                historyToggleBtn.textContent = "Show Fact History";
            }
        });

        // Initial load
        updateFactDisplay();
        addToHistory(currentFact.main);

        // Add a button to start the challenge
        const startChallengeBtn = document.createElement('button');
        startChallengeBtn.id = 'start-challenge-btn';
        startChallengeBtn.className = 'btn main-action-btn';
        startChallengeBtn.textContent = 'Start Fact Challenge!';
        startChallengeBtn.style.marginTop = '20px';
        document.getElementById('challenge-buttons').appendChild(startChallengeBtn);

        startChallengeBtn.addEventListener('click', startFactChallenge);

        // Back to main facts button
        const backToMainFactsBtn = document.createElement('button');
        backToMainFactsBtn.id = 'back-to-main-facts-btn';
        backToMainFactsBtn.className = 'btn';
        backToMainFactsBtn.textContent = 'Back to Daily Facts';
        backToMainFactsBtn.style.marginTop = '20px';
        backToMainFactsBtn.style.display = 'none';
        factChallengeArea.appendChild(backToMainFactsBtn);

        backToMainFactsBtn.addEventListener('click', () => {
            factChallengeArea.style.display = 'none';
            document.getElementById('fact-of-the-day-container').style.display = 'flex';
            backToMainFactsBtn.style.display = 'none';
            startChallengeBtn.style.display = 'block';
            updateFactDisplay(); // Reset the fact display to hidden
        });

        startChallengeBtn.addEventListener('click', () => {
            startFactChallenge();
            startChallengeBtn.style.display = 'none';
            backToMainFactsBtn.style.display = 'block';
        });

    </script>
</body>
</html>