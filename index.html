<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Facts Explorer</title>
    <style>
        :root {
            /* Theme colors will be set dynamically by JavaScript */
            --button-primary: hsl(210, 45%, 55%);
            --button-hover: hsl(210, 55%, 65%);
            --main-action-btn: hsl(160, 65%, 45%);
            --main-action-btn-hover: hsl(160, 75%, 55%);
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.25);
            --fact-card-bg: rgba(0, 0, 0, 0.3);
            --fact-card-shadow-inset: inset 0 0 15px rgba(0,0,0,0.3);
            --fact-text-shadow: 1px 1px 5px rgba(0,0,0,0.3);
            --title-color: hsl(0, 0%, 100%);
            --title-shadow: 3px 3px 10px rgba(0, 0, 0, 0.5);
            --quiz-option-btn: hsl(200, 35%, 35%);
            --quiz-option-btn-hover: hsl(200, 45%, 45%);
            --quiz-correct: hsl(120, 55%, 45%);
            --quiz-incorrect: hsl(0, 55%, 45%);
            --challenge-timer-progress: hsl(0, 100%, 70%);
            --challenge-streak-color: hsl(160, 80%, 70%);
            --history-toggle-color: hsl(0, 0%, 95%);
            --history-list-color: hsl(0, 0%, 85%);
        }

        body {
            background: var(--bg-gradient);
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
            transition: background 0.8s ease-in-out, color 0.5s ease;
            overflow-x: hidden;
        }
        .container {
            max-width: 950px;
            width: 100%;
            margin-bottom: 20px;
            padding: 40px;
            background-color: var(--glass-bg);
            border-radius: 20px;
            box-shadow: 0 10px 40px 0 rgba( 31, 38, 135, 0.45 );
            backdrop-filter: blur( 8px );
            -webkit-backdrop-filter: blur( 8px );
            border: 1px solid var(--glass-border);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        .container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(255,255,255,0.05) 10%, transparent 70%);
            animation: rotateBackground 20s linear infinite;
            opacity: 0.3;
        }
        @keyframes rotateBackground {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        h1#main-title {
            font-size: 5.5rem; /* Larger title */
            margin-bottom: 2.5rem; /* More space below title */
            text-shadow: var(--title-shadow);
            color: var(--title-color);
            letter-spacing: 3px; /* Increased letter spacing */
            font-weight: 800; /* Bolder title */
        }
        .fact-card { /* This style is now primarily for quiz/challenge areas */
            background-color: var(--fact-card-bg);
            padding: 40px; /* Increased padding */
            border-radius: 20px; /* More rounded */
            margin-bottom: 30px; /* More margin below card */
            width: 95%;
            max-width: 800px; /* Increased max-width */
            box-shadow: 0 0 30px rgba(0,0,0,0.6), var(--fact-card-shadow-inset); /* Stronger shadow */
            position: relative;
            overflow: hidden;
            min-height: 280px; /* Ensure enough space for content */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        p {
            font-size: 2.5rem; /* Significantly increased font size for main fact */
            line-height: 1.5; /* Improved line height for readability */
            margin-bottom: 2rem; /* More space below fact text */
            cursor: pointer;
            transition: transform 0.3s ease-in-out, color 0.3s ease-in-out;
            text-shadow: var(--fact-text-shadow);
            font-weight: 500; /* Slightly bolder for emphasis */
        }
        p:hover {
            transform: scale(1.02); /* Slightly less aggressive scale on hover */
            color: hsl(60, 100%, 90%); /* Brighter on hover */
        }
        #main-fact, #quiz-fact, #challenge-fact {
            animation: fadeInScale 1.2s ease-out forwards;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        @keyframes fadeInScale {\n            from { opacity: 0; transform: scale(0.9); }\n            to { opacity: 1; transform: scale(1); }\n        }\n        @keyframes slideInFromBottom {\n            from { transform: translateY(100%); opacity: 0; }\n            to { transform: translateY(0); opacity: 0.95; }\n        }\n        #footer-info {\n            font-size: 1.4rem; /* Slightly larger font */\n            color: var(--text-color);\n            background-color: var(--footer-bg);\n            padding: 20px 40px; /* Increased padding */\n            border-radius: 15px; /* More rounded */\n            opacity: 0.98;\n            margin-top: 40px; /* More margin-top */\n            animation: slideInFromBottom 0.8s ease-out forwards;\n            box-shadow: 0 -8px 25px rgba(0, 0, 0, 0.4); /* Stronger shadow */\n            font-weight: 600; /* Bolder font */\n            transition: background-color 0.5s ease, color 0.5s ease;\n        }\n        #fact-of-the-day-container {\n            margin-top: 25px;\n            margin-bottom: 25px;\n            padding: 30px 40px; /* Increased padding */\n            background-color: rgba(255, 255, 255, 0.15); /* Slightly more opaque */\n            border-radius: 20px; /* More rounded */
            box-shadow: 0 8px 30px rgba(0,0,0,0.4); /* Stronger shadow */
            backdrop-filter: blur(10px); /* More blur */
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3); /* Stronger border */
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            max-width: 850px; /* Increased max-width */
            width: 95%;
            display: flex; /* Use flexbox for centering content */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 180px; /* Ensure enough space */
        }
        #fact-of-the-day-container:hover {\n            transform: translateY(-8px) scale(1.02); /* More pronounced hover effect */
            box-shadow: 0 12px 40px rgba(0,0,0,0.5);\n        }\n        #fact-of-the-day-text {\n            font-size: 2.4rem; /* Significantly increased font size */
            color: var(--text-color);\n            font-style: italic;\n            font-weight: 600; /* Bolder */
            text-shadow: 2px 2px 5px rgba(0,0,0,0.3); /* Stronger text shadow */
            transition: color 0.4s ease, filter 0.6s ease; /* Added filter transition */
            line-height: 1.4; /* Improved readability */
        }
        .fact-blurred {
            filter: blur(8px); /* Apply blur effect */
            cursor: pointer;
            user-select: none; /* Prevent text selection */
        }
        .fact-blurred:hover {
            filter: blur(4px); /* Less blur on hover */
        }
        #fact-of-the-day-container.revealed .fact-blurred {
            filter: blur(0); /* Remove blur when revealed */
        }
        #fact-of-the-day-container.revealed #fact-of-the-day-text {
            cursor: default; /* Change cursor after reveal */
        }
        #fact-of-the-day-container.revealed #fact-of-the-day-text:hover {
            color: var(--text-color); /* Reset hover color after reveal */
        }
        #fact-of-the-day-container:hover #fact-of-the-day-text {\n            color: hsl(60, 100%, 90%); /* Brighter on hover */
        }\n        #did-you-know {\n            margin-top: 25px; /* Increased margin */
            padding-top: 20px; /* Increased padding */
            border-top: 1px solid rgba(255, 255, 255, 0.2); /* Stronger border */
            text-align: left;\n            max-height: 0;\n            overflow: hidden;\n            opacity: 0;\n            transition: max-height 0.8s ease-out, opacity 0.8s ease-out, transform 0.8s ease-out; /* Added transform transition */
            transform: translateY(20px); /* Initial slight offset */
        }\n        #did-you-know.show-did-you-know {\n            max-height: 300px; /* Adjusted based on expected content size */
            opacity: 1;\n            transform: translateY(0);\n        }\n        #did-you-know h3 {\n            font-size: 1.6rem;\n            color: hsl(60, 100%, 85%);\n            margin-bottom: 10px;\n            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);\n        }\n        #did-you-know-content {\n            font-size: 1.2rem;\n            color: var(--history-list-color);\n            line-height: 1.5;\n            margin-bottom: 0;\n        }\n\n        /* Quiz Specific Styles */\n        #quiz-area h2, #challenge-area h2 {\n            font-size: 3rem;\n            margin-bottom: 1.8rem;\n            color: hsl(60, 100%, 90%);\n            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.4);\n        }\n        #quiz-fact, #challenge-fact {\n            font-size: 1.8rem;\n            margin-bottom: 2.5rem;\n            min-height: 90px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        #quiz-options, #challenge-options {\n            display: flex;\n            flex-wrap: wrap;\n            justify-content: center;\n            gap: 18px;\n            margin-bottom: 25px;\n        }\n        .quiz-option-btn, .challenge-option-btn {\n            background-color: var(--quiz-option-btn);\n            color: #FFFFFF;\n            padding: 15px 30px;\n            font-size: 1.2rem;\n            border-radius: 10px;\n            cursor: pointer;\n            transition: background-color 0.3s, transform 0.2s;\n            min-width: 140px;\n            box-shadow: 0 4px 10px rgba(0,0,0,0.2);\n        }\n        .quiz-option-btn:hover, .challenge-option-btn:hover {\n            background-color: var(--quiz-option-btn-hover);\n            transform: translateY(-3px);\n        }\n        .quiz-option-btn.correct, .challenge-option-btn.correct {\n            background-color: var(--quiz-correct);\n            box-shadow: 0 0 15px hsl(120, 70%, 60%);\n        }\n        .quiz-option-btn.incorrect, .challenge-option-btn.incorrect {\n            background-color: var(--quiz-incorrect);\n            box-shadow: 0 0 15px hsl(0, 70%, 60%);\n        }\n        #quiz-feedback, #challenge-feedback {\n            font-size: 1.8rem;\n            font-weight: bold;\n            min-height: 40px;\n            margin-top: 15px;\n            text-shadow: var(--fact-text-shadow);\n        }\n\n        /* Challenge Specific Styles */\n        #challenge-timer-container {\n            width: 80%;\n            max-width: 400px;\n            background-color: rgba(0, 0, 0, 0.4);\n            border-radius: 15px;\n            margin-bottom: 20px;\n            overflow: hidden;\n            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);\n            position: relative;\n            height: 40px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        #challenge-timer-progress {\n            height: 100%;\n            width: 100%;\n            background-color: var(--challenge-timer-progress);\n            border-radius: 15px;\n            transition: width linear;\n            position: absolute;\n            left: 0;\n            top: 0;\n            transform-origin: left;\n        }\n        #challenge-timer-text {\n            position: relative;\n            z-index: 1;\n            font-size: 1.8rem;\n            font-weight: bold;\n            color: #FFFFFF;\n            text-shadow: 1px 1px 5px rgba(0,0,0,0.5);\n        }\n        #challenge-streak {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: var(--challenge-streak-color);\n            margin-top: 15px;\n            min-height: 30px;\n        }\n\n        /* Collapsible History */\n        .collapsible-section {\n            margin-top: 35px;\n            width: 95%;\n            max-width: 750px;\n            background-color: var(--glass-bg);\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);\n            overflow: hidden;\n            transition: max-height 0.8s ease-out;\n            max-height: 90px;\n        }\n        .collapsible-section.expanded {\n            max-height: 450px;\n        }\n        #history-toggle {\n            cursor: pointer;\n            font-size: 1.6rem;\n            color: var(--history-toggle-color);\n            margin-bottom: 18px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-weight: 600;\n            text-shadow: var(--fact-text-shadow);\n        }\n        #history-toggle .toggle-icon {\n            margin-left: 12px;\n            transition: transform 0.3s ease;\n            font-size: 1.2em;\n        }\n        .collapsible-section.expanded #history-toggle .toggle-icon {\n            transform: rotate(180deg);\n        }\n        #history-list {\n            list-style: none;\n            padding: 0;\n            margin: 0;\n            text-align: left;\n            color: var(--history-list-color);\n            font-size: 1.15rem;\n        }\n        #history-list li {\n            padding: 10px 0;\n            border-bottom: 1px solid rgba(255, 255, 255, 0.1));\n        }\n        #history-list li:last-child {\n            border-bottom: none;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1 id=\"main-title\">Cosmic Facts Explorer</h1>\n\n        <div id=\"fact-of-the-day-container\">\n            <div id=\"fact-of-the-day-text\"></div>\n            <div id=\"did-you-know\">\n                <h3>Did You Know?</h3>\n                <p id=\"did-you-know-content\"></p>\n            </div>\n        </div>\n\n        <div id=\"quiz-area\" class=\"fact-card\" style=\"display: none;\">\n            <h2>Fact Quiz!</h2>\n            <p id=\"quiz-fact\"></p>\n            <div id=\"quiz-options\"></div>\n            <p id=\"quiz-feedback\"></p>\n            <button id=\"next-quiz-btn\" style=\"display: none;\">Next Question</button>\n        </div>\n\n        <div id=\"challenge-area\" class=\"fact-card\" style=\"display: none;\">\n            <h2>Fact Challenge!</h2>\n            <p id=\"challenge-fact\"></p>\n            <div id=\"challenge-timer-container\">\n                <div id=\"challenge-timer-progress\"></div>\n                <span id=\"challenge-timer-text\">Time: 10s</span>\n            </div>\n            <div id=\"challenge-options\"></div>\n            <p id=\"challenge-feedback\"></p>\n            <p id=\"challenge-streak\">Streak: 0</p>\n            <p id=\"challenge-high-score\">High Score: 0</p>\n            <div class=\"challenge-actions\">\n                <button id=\"next-challenge-btn\" style=\"display: none;\">Next Challenge</button>\n                <button id=\"restart-challenge-btn\" style=\"display: none;\">Restart Challenge</button>\n            </div>\n        </div>\n\n        <div class=\"fact-actions\">\n            <button id=\"toggle-quiz-btn\" class=\"main-action-btn\">Start Fact Quiz</button>\n            <button id=\"toggle-challenge-btn\" class=\"main-action-btn\">Start Fact Challenge</button>\n        </div>\n    </div>\n    \n    <div id=\"footer-info\"></div>\n\n    <div id=\"fact-history\" class=\"collapsible-section\">\n        <h3 id=\"history-toggle\">Fact History <span class=\"toggle-icon\">â–¼</span></h3>\n        <ul id=\"history-list\"></ul>\n    </div>\n    \n    <script>\n        const facts = [\n            { main: \"ðŸŒ³ Trees can communicate with each other, and forests can even create their own rain through a process called the Biotic Pump Theory.\", more: \"This communication happens through a network of fungi in their roots, and the Biotic Pump Theory suggests that forests can influence atmospheric pressure and humidity to generate rainfall.\", theme: \"Nature\" },\n            { main: \"In the vacuum of space, two pieces of the same metal will permanently bond if they touch.\", more: \"This phenomenon is known as 'cold welding' and occurs because there's no atmosphere to create an oxide layer, allowing the atoms to fuse.\", theme: \"Space\" },\n            { main: \"ðŸ¦¥ Sloths can hold their breath longer than dolphins.\", more: \"Sloths can slow their heart rate and hold their breath underwater for up to 40 minutes, which is longer than dolphins can.\", theme: \"Animals\" },\n            { main: \"ðŸŒŒ The Universe's average color is called 'Cosmic Latte'.\", more: \"This color was determined by a team of astronomers in 2002, averaging the light from over 200,000 galaxies.\", theme: \"Cosmic Latte\" },\n            { main: \"ðŸŒŒ A day on Venus is longer than its year.\", more: \"It takes about 243 Earth days to complete one spin on its axis, but only 225 Earth days to orbit the Sun.\", theme: \"Space\" },\n            { main: \"ðŸ¥› Hippopotamus milk is pink.\", more: \"This unique color is due to two distinct acids, hipposudoric acid and norhipposudoric acid, which act as natural pigments and also have antibiotic properties.\", theme: \"Animals\" },\n            { main: \"ðŸŒŠ The Great Barrier Reef is the largest living structure on Earth and can be seen from space.\", more: \"It is composed of over 3,000 individual reefs and 900 islands stretching for over 2,300 kilometers.\", theme: \"Ocean\" },\n            { main: \"ðŸŒ³ A single oak tree can produce 10 million acorns in its lifetime.\", more: \"However, only about 1 in 10,000 acorns will grow into a new oak tree.\", theme: \"Nature\" },\n            { main: \"ðŸ¦‹ The Monarch butterfly migrates up to 3,000 miles from Canada and the U.S. to Mexico.\", more: \"This incredible journey is undertaken by several generations of butterflies, with no single butterfly completing the entire round trip.\", theme: \"Animals\" },\n            { main: \"ðŸ§  The human brain weighs about 3 pounds but uses 20% of the body's oxygen and calories.\", more: \"It contains approximately 86 billion neurons, more than the number of stars in our galaxy.\", theme: \"Human Body\" },\n            { main: \"ðŸ’¡ The average person will spend 6 months of their life waiting for red lights to turn green.\", more: \"This is based on an average commute and daily activities involving traffic lights.\", theme: \"Everyday Life\" },\n            { main: \"ðŸŒ³ There are more trees on Earth than stars in the Milky Way galaxy.\", more: \"Scientists estimate there are about 3 trillion trees on Earth, while the Milky Way is estimated to contain 100-400 billion stars.\", theme: \"Nature\" },\n            { main: \"ðŸŒŒ The Milky Way galaxy is thought to smell of rum, raspberries, and booze.\", more: \"This unique scent is attributed to ethyl formate, a chemical found in rum and raspberries, detected in the Sagittarius B2 cloud near the galaxy's center.\", theme: \"Space\" },\n            { main: \"ðŸŒ The first webcam was created in 1991 to monitor a coffee pot at Cambridge University.\", more: \"Researchers at the University of Cambridge set up a camera to monitor the Trojan Room coffee pot so they wouldn't make a wasted trip to an empty pot.\", theme: \"Technology\" }\n        ];\n\n        let currentFact = facts[12]; // Set to the \"Milky Way\" fact initially\n        let quizScore = 0;\n        let currentQuizFact = null;\n        let challengeScore = 0;\n        let challengeTimer;\n        let timeLeft = 10;\n        let currentChallengeFact = null;\n        let challengeStreak = 0;\n\n        const mainTitleElement = document.getElementById('main-title');\n        const factOfTheDayContainer = document.getElementById('fact-of-the-day-container');\n        const factOfTheDayTextElement = document.getElementById('fact-of-the-day-text');\n        const didYouKnowElement = document.getElementById('did-you-know');\n        const didYouKnowContentElement = document.getElementById('did-you-know-content');\n        const bodyElement = document.body;\n        const footerInfoElement = document.getElementById('footer-info');\n\n        const quizArea = document.getElementById('quiz-area');\n        const quizFactElement = document.getElementById('quiz-fact');\n        const quizOptionsElement = document.getElementById('quiz-options');\n        const quizFeedbackElement = document.getElementById('quiz-feedback');\n        const nextQuizBtn = document.getElementById('next-quiz-btn');\n        const toggleQuizBtn = document.getElementById('toggle-quiz-btn');\n\n        const challengeArea = document.getElementById('challenge-area');\n        const challengeTimerContainer = document.getElementById('challenge-timer-container');\n        const challengeTimerProgress = document.getElementById('challenge-timer-progress');\n        const challengeTimerText = document.getElementById('challenge-timer-text');\n        const challengeOptionsElement = document.getElementById('challenge-options');\n        const challengeFeedbackElement = document.getElementById('challenge-feedback');\n        const nextChallengeBtn = document.getElementById('next-challenge-btn');\n        const restartChallengeBtn = document.getElementById('restart-challenge-btn');\n        const toggleChallengeBtn = document.getElementById('toggle-challenge-btn');\n        const challengeStreakElement = document.getElementById('challenge-streak');\n        const challengeHighScoreElement = document.getElementById('challenge-high-score');\n\n        const factHistorySection = document.getElementById('fact-history');\n        const historyToggle = document.getElementById('history-toggle');\n        const historyListElement = document.getElementById('history-list');\n\n        const themeColors = {\n            "Space": {\n                background: 'linear-gradient(135deg, hsl(240, 30%, 15%) 0%, hsl(260, 25%, 10%) 100%)',\n                text: 'hsl(60, 80%, 90%)',\n                footerBackground: 'hsl(240, 20%, 10%)'\n            },\n            "Nature": {\n                background: 'linear-gradient(135deg, hsl(120, 30%, 20%) 0%, hsl(100, 25%, 15%) 100%)',\n                text: 'hsl(60, 80%, 90%)',\n                footerBackground: 'hsl(120, 20%, 15%)'\n            },\n            "Animals": {\n                background: 'linear-gradient(135deg, hsl(30, 40%, 25%) 0%, hsl(40, 30%, 20%) 100%)',\n                text: 'hsl(0, 0%, 95%)',\n                footerBackground: 'hsl(30, 30%, 20%)'\n            },\n            "Ocean": {\n                background: 'linear-gradient(135deg, hsl(200, 50%, 20%) 0%, hsl(220, 45%, 15%) 100%)',\n                text: 'hsl(180, 70%, 90%)',\n                footerBackground: 'hsl(200, 40%, 15%)'\n            },\n            "Human Body": {\n                background: 'linear-gradient(135deg, hsl(210, 10%, 25%) 0%, hsl(230, 15%, 20%) 100%)',\n                text: 'hsl(0, 0%, 95%)',\n                footerBackground: 'hsl(210, 10%, 15%)'\n            },\n            "Everyday Life": {\n                background: 'linear-gradient(135deg, hsl(40, 20%, 30%) 0%, hsl(50, 15%, 25%) 100%)',\n                text: 'hsl(0, 0%, 95%)',\n                footerBackground: 'hsl(40, 15%, 25%)'\n            },\n            "Technology": {\n                background: 'linear-gradient(135deg, hsl(200, 20%, 20%) 0%, hsl(220, 15%, 15%) 100%)',\n                text: 'hsl(180, 70%, 90%)',\n                footerBackground: 'hsl(200, 15%, 15%)'\n            },\n            "Cosmic Latte": {\n                background: 'linear-gradient(135deg, hsl(40, 30%, 70%) 0%, hsl(50, 25%, 65%) 100%)',\n                text: 'hsl(30, 40%, 20%)',\n                footerBackground: 'hsl(40, 25%, 60%)'\n            }\n        };\n\n        function applyThemeColors(theme) {\n            if (themeColors[theme]) {\n                document.documentElement.style.setProperty('--bg-gradient', themeColors[theme].background);\n                document.documentElement.style.setProperty('--text-color', themeColors[theme].text);\n                document.documentElement.style.setProperty('--footer-bg', themeColors[theme].footerBackground);\n            }\n        }\n\n        function displayFact() {\n            factOfTheDayTextElement.textContent = "Click to reveal a cosmic fact!";\n            factOfTheDayTextElement.classList.add('fact-blurred');\n            factOfTheDayContainer.classList.remove('revealed');\n            didYouKnowElement.classList.remove('show-did-you-know'); // Hide Did You Know on new fact\n\n            footerInfoElement.textContent = `Explore the amazing world of ${currentFact.theme}!`;\n            applyThemeColors(currentFact.theme);\n            updateFactHistory(currentFact.main);\n        }\n\n        factOfTheDayContainer.addEventListener('click', () => {\n            if (!factOfTheDayContainer.classList.contains('revealed')) {\n                factOfTheDayTextElement.textContent = currentFact.main;\n                didYouKnowContentElement.textContent = currentFact.more;\n                factOfTheDayTextElement.classList.remove('fact-blurred');\n                factOfTheDayContainer.classList.add('revealed');\n                didYouKnowElement.classList.add('show-did-you-know');\n            } else {\n                didYouKnowElement.classList.toggle('show-did-you-know');\n            }\n        });\n\n        // Fact History Logic\n        const factHistory = [];\n\n        function updateFactHistory(fact) {\n            if (factHistory.length === 0 || factHistory[factHistory.length - 1] !== fact) {\n                factHistory.push(fact);\n                if (factHistory.length > 5) {\n                    factHistory.shift();\n                }\n            }\n            renderFactHistory();\n        }\n\n        function renderFactHistory() {\n            historyListElement.innerHTML = '';\n            factHistory.forEach((fact, index) => {\n                const listItem = document.createElement('li');\n                listItem.textContent = `${index + 1}. ${fact}`;\n                listItem.style.cursor = 'pointer'; // Add cursor style to indicate clickability\n                listItem.addEventListener('click', () => {\n                    const factObj = facts.find(f => f.main === fact);\n                    if (factObj) {\n                        currentFact = factObj;\n                        displayFact();\n                        factHistorySection.classList.remove('expanded'); // Collapse history after selection\n                    }\n                });\n                historyListElement.appendChild(listItem);\n            });\n        }\n\n        historyToggle.addEventListener('click', () => {\n            factHistorySection.classList.toggle('expanded');\n        });\n\n        // Quiz Logic\n        const availableThemes = Object.keys(themeColors);\n\n        toggleQuizBtn.addEventListener('click', () => {\n            if (factOfTheDayContainer.style.display !== 'none' || challengeArea.style.display !== 'none') {\n                factOfTheDayContainer.style.display = 'none';\n                challengeArea.style.display = 'none';\n                quizArea.style.display = 'block';\n                toggleQuizBtn.textContent = 'Back to Facts';\n                toggleChallengeBtn.style.display = 'none';\n                mainTitleElement.textContent = 'Fact Quiz!';\n                startQuiz();\n            } else {\n                quizArea.style.display = 'none';\n                factOfTheDayContainer.style.display = 'block';\n                toggleQuizBtn.textContent = 'Start Fact Quiz';\n                toggleChallengeBtn.style.display = 'inline-block';\n                mainTitleElement.textContent = 'Cosmic Facts Explorer';\n                quizScore = 0;\n                quizFeedbackElement.textContent = '';\n                nextQuizBtn.style.display = 'none';\n            }\n        });\n\n        function startQuiz() {\n            quizScore = 0;\n            quizFeedbackElement.textContent = '';\n            nextQuizBtn.style.display = 'none';\n            displayQuizQuestion();\n        }\n\n        function displayQuizQuestion() {\n            quizOptionsElement.innerHTML = '';\n            quizFeedbackElement.textContent = '';\n            nextQuizBtn.style.display = 'none';\n\n            const randomFactIndex = Math.floor(Math.random() * facts.length);\n            currentQuizFact = facts[randomFactIndex];\n            quizFactElement.textContent = currentQuizFact.main;\n\n            let options = [currentQuizFact.theme];\n            while (options.length < 4) {\n                const randomTheme = availableThemes[Math.floor(Math.random() * availableThemes.length)];\n                if (!options.includes(randomTheme)) {\n                    options.push(randomTheme);\n                }\n            }\n            options.sort(() => Math.random() - 0.5);\n\n            options.forEach(theme => {\n                const button = document.createElement('button');\n                button.textContent = theme;\n                button.classList.add('quiz-option-btn');\n                button.addEventListener('click', () => checkAnswer(button, theme));\n                quizOptionsElement.appendChild(button);\n            });\n        }\n\n        function checkAnswer(selectedButton, selectedTheme) {\n            Array.from(quizOptionsElement.children).forEach(button => {\n                button.disabled = true;\n                if (button.textContent === currentQuizFact.theme) {\n                    button.classList.add('correct');\n                } else {\n                    button.classList.add('incorrect');\n                }\n            });\n\n            if (selectedTheme === currentQuizFact.theme) {\n                quizFeedbackElement.textContent = 'Correct! ðŸŽ‰';\n                quizScore++;\n            } else {\n                quizFeedbackElement.textContent = `Incorrect. The answer was ${currentQuizFact.theme}.`;\n            }\n            nextQuizBtn.style.display = 'block';\n        }\n\n        nextQuizBtn.addEventListener('click', displayQuizQuestion);\n\n        // Challenge Logic\n        toggleChallengeBtn.addEventListener('click', () => {\n            if (factOfTheDayContainer.style.display !== 'none' || quizArea.style.display !== 'none') {\n                factOfTheDayContainer.style.display = 'none';\n                quizArea.style.display = 'none';\n                challengeArea.style.display = 'block';\n                toggleChallengeBtn.textContent = 'Back to Facts';\n                toggleQuizBtn.style.display = 'none';\n                mainTitleElement.textContent = 'Fact Challenge!';\n                startChallenge();\n            } else {\n                challengeArea.style.display = 'none';\n                factOfTheDayContainer.style.display = 'block';\n                toggleChallengeBtn.textContent = 'Start Fact Challenge';\n                toggleQuizBtn.style.display = 'inline-block';\n                mainTitleElement.textContent = 'Cosmic Facts Explorer';\n                challengeScore = 0;\n                challengeFeedbackElement.textContent = '';\n                nextChallengeBtn.style.display = 'none';\n                restartChallengeBtn.style.display = 'none';\n                clearInterval(challengeTimer);\n                challengeStreak = 0;\n                challengeStreakElement.textContent = 'Streak: 0';\n            }\n        });\n\n        function startChallenge() {\n            challengeScore = 0;\n            challengeFeedbackElement.textContent = '';\n            nextChallengeBtn.style.display = 'none';\n            restartChallengeBtn.style.display = 'none';\n            challengeStreak = 0;\n            challengeStreakElement.textContent = 'Streak: 0';\n            const storedHighScore = localStorage.getItem('challengeHighScore');\n            if (storedHighScore) {\n                challengeHighScoreElement.textContent = `High Score: ${storedHighScore}`;\n            } else {\n                challengeHighScoreElement.textContent = 'High Score: 0';\n            }\n            displayChallengeQuestion();\n        }\n\n        function displayChallengeQuestion() {\n            clearInterval(challengeTimer);\n            timeLeft = 10;\n            challengeTimerText.textContent = `Time: ${timeLeft}s`;\n            challengeTimerProgress.style.transition = 'none';\n            challengeTimerProgress.style.width = '100%';\n            void challengeTimerProgress.offsetWidth;\n            challengeTimerProgress.style.transition = `width ${timeLeft}s linear`;\n            challengeTimerProgress.style.width = '0%';\n\n\n            challengeOptionsElement.innerHTML = '';\n            challengeFeedbackElement.textContent = '';\n            nextChallengeBtn.style.display = 'none';\n            restartChallengeBtn.style.display = 'none';\n\n            const randomFactIndex = Math.floor(Math.random() * facts.length);\n            currentChallengeFact = facts[randomFactIndex];\n            challengeFactElement.textContent = currentChallengeFact.main;\n\n            let options = [currentChallengeFact.theme];\n            while (options.length < 4) {\n                const randomTheme = availableThemes[Math.floor(Math.random() * availableThemes.length)];\n                if (!options.includes(randomTheme)) {\n                    options.push(randomTheme);\n                }\n            }\n            options.sort(() => Math.random() - 0.5);\n\n            options.forEach(theme => {\n                const button = document.createElement('button');\n                button.textContent = theme;\n                button.classList.add('challenge-option-btn');\n                button.addEventListener('click', () => checkChallengeAnswer(button, theme));\n                challengeOptionsElement.appendChild(button);\n            });\n\n            challengeTimer = setInterval(updateChallengeTimer, 1000);\n        }\n\n        function updateChallengeTimer() {\n            timeLeft--;\n            challengeTimerText.textContent = `Time: ${timeLeft}s`;\n            if (timeLeft <= 0) {\n                clearInterval(challengeTimer);\n                challengeFeedbackElement.textContent = `Time's up! The answer was ${currentChallengeFact.theme}.`;\n                Array.from(challengeOptionsElement.children).forEach(button => {\n                    button.disabled = true;\n                    if (button.textContent === currentChallengeFact.theme) {\n                        button.classList.add('correct');\n                    }\n                });\n                nextChallengeBtn.style.display = 'block';\n                restartChallengeBtn.style.display = 'block';\n                challengeStreak = 0;\n                challengeStreakElement.textContent = 'Streak: 0';\n            }\n        }\n\n        function checkChallengeAnswer(selectedButton, selectedTheme) {\n            clearInterval(challengeTimer);\n            Array.from(challengeOptionsElement.children).forEach(button => {\n                button.disabled = true;\n                if (button.textContent === currentChallengeFact.theme) {\n                    button.classList.add('correct');\n                } else {\n                    button.classList.add('incorrect');\n                }\n            });\n\n            if (selectedTheme === currentChallengeFact.theme) {\n                challengeFeedbackElement.textContent = 'Correct! ðŸŽ‰';\n                challengeScore++;\n                challengeStreak++;\n                const currentHighScore = parseInt(localStorage.getItem('challengeHighScore') || '0');\n                if (challengeStreak > currentHighScore) {\n                    localStorage.setItem('challengeHighScore', challengeStreak.toString());\n                    challengeHighScoreElement.textContent = `High Score: ${challengeStreak}`;\n                }\n            } else {\n                challengeFeedbackElement.textContent = `Incorrect. The answer was ${currentChallengeFact.theme}.`;\n                challengeStreak = 0;\n            }\n            challengeStreakElement.textContent = `Streak: ${challengeStreak}`;\n            nextChallengeBtn.style.display = 'block';\n            restartChallengeBtn.style.display = 'block';\n        }\n\n        nextChallengeBtn.addEventListener('click', displayChallengeQuestion);\n        restartChallengeBtn.addEventListener('click', startChallenge);\n\n        // Initial display\n        displayFact();\n    </script>\n</body>\n</html>