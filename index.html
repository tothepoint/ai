<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="site-title">Cosmic Wonders</title>
    <style>
        :root {
            /* Cosmic Wonders Theme Colors */
            --bg-color-primary: #1A0F2D; /* Deep Space Purple */
            --bg-color-secondary: #0D071A; /* Even Deeper Space */
            --text-color: #E0E0E0; /* Ethereal White */
            --footer-bg: #120A20; /* Darker Space for Footer */
            --glass-bg: rgba(26, 15, 45, 0.7); /* Semi-transparent Deep Space */
            --glass-border: rgba(224, 224, 224, 0.3); /* Soft White border */
            --fact-text-shadow: 0 0 15px rgba(224, 224, 224, 0.8); /* White glow */
            --title-color: #ADD8E6; /* Light Blue - for a vibrant cosmic title */
            --title-shadow: 0 0 20px rgba(173, 216, 230, 0.7); /* Light Blue glow */
            --main-action-btn: #ADD8E6; /* Light Blue - for action buttons */
            --main-action-btn-hover: #87CEEB; /* Slightly darker Light Blue */
            --theme-indicator-color: #ADD8E6; /* Light Blue */
            --favorite-btn-color: #ADD8E6; /* Light Blue */
            --favorite-btn-hover: #87CEEB; /* Lighter Light Blue */
            --share-btn-color: #ADD8E6; /* Light Blue */
            --share-btn-hover: #87CEEB; /* Lighter Light Blue */
            --rating-active-color: #ADD8E6; /* Light Blue */
            --rating-text-color: #E0E0E0; /* Ethereal White */
            --fact-card-bg: rgba(13, 7, 26, 0.8); /* Very dark, almost black with a hint of purple */
            --fact-card-border: rgba(173, 216, 230, 0.5); /* Light Blue border for emphasis */
            --fact-of-day-glow: 0 0 25px rgba(173, 216, 230, 0.9); /* Strong Light Blue glow */
            --cosmic-scan-color: rgba(255, 255, 0, 0.9); /* Yellow scan */
            --scramble-input-bg: rgba(224, 224, 224, 0.1);
            --scramble-input-border: #ADD8E6;
            --scramble-input-text: #E0E0E0;
            --scramble-button-bg: #ADD8E6;
            --scramble-button-hover: #87CEEB;
            --scramble-message-correct: #E0E0E0;
            --scramble-message-incorrect: #EF5350; /* Red for incorrect */
            --star-particle-color: rgba(255, 255, 255, 0.7); /* White for star particles */
        }

        body {
            background: linear-gradient(135deg, var(--bg-color-primary) 0%, var(--bg-color-secondary) 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
            transition: background 1.5s ease-in-out, color 0.8s ease;
            overflow-x: hidden;
            position: relative;
            cursor: crosshair; /* Indicate interactivity */
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .stargazing-mode {
            background: #000000; /* Black for stargazing */
            background-image: radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 40px),
                              radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 30px),
                              radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 40px),
                              radial-gradient(rgba(255,255,255,.4), rgba(255,255,255,.1) 2px, transparent 30px);
            background-size: 550px 550px, 350px 350px, 250px 250px, 150px 150px;
            background-position: 0 0, 40px 60px, 130px 270px, 70px 100px;
            animation: starfieldPan 200s linear infinite;
        }

        @keyframes starfieldPan {
            from { background-position: 0 0, 40px 60px, 130px 270px, 70px 100px; }
            to { background-position: 10000px 5000px, 10040px 5060px, 10130px 5270px, 10070px 5100px; }
        }


        .container {
            background: var(--glass-bg);
            border-radius: 25px; /* Slightly more rounded */
            padding: 40px 60px;
            margin: auto;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6); /* Stronger shadow */
            backdrop-filter: blur(12px); /* More blur */
            border: 1px solid var(--glass-border);
            max-width: 900px; /* Wider container */
            width: 90%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 350px; /* Taller container */
            transition: all 0.6s ease;
            animation: fadeInScale 1s ease-out forwards;
            position: relative; /* For absolute positioning of theme indicator */
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        h1 {
            color: var(--title-color);
            font-size: 4rem; /* Larger title */
            margin-bottom: 25px;
            text-shadow: var(--title-shadow);
            transition: color 0.6s ease;
            letter-spacing: 2px; /* More spaced out */
        }

        #fact-display, #scramble-fact-display {
            font-size: 2.5rem; /* Larger fact text */
            font-weight: 600; /* Bolder */
            margin: 35px 0 20px 0;
            line-height: 1.5;
            text-shadow: var(--fact-text-shadow);
            color: var(--text-color);
            transition: color 0.6s ease, transform 0.6s ease, opacity 0.6s ease, filter 0.6s ease;
            opacity: 1;
            transform: translateY(0);
            padding: 0 15px; /* Add some padding */
        }

        .blurred-fact {
            filter: blur(10px); /* More blur for mystery */
            cursor: pointer;
        }

        .fact-card {
            background-color: var(--fact-card-bg);
            border: 2px solid var(--fact-card-border);
            border-radius: 20px; /* More rounded */
            padding: 30px;
            margin: 25px 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7); /* Stronger shadow */
            width: 95%;
            max-width: 700px;
            transition: all 0.6s ease;
            position: relative;
            overflow: hidden; /* For cosmic scan */
        }

        .action-button {
            background-color: var(--main-action-btn);
            color: white;
            border: none;
            padding: 18px 35px; /* Larger buttons */
            font-size: 1.4rem;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 6px 18px rgba(0,0,0,0.5);
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            margin-top: 25px;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .action-button:hover {\n            background-color: var(--main-action-btn-hover);\n            transform: translateY(-4px); /* More pronounced lift */\n            box-shadow: 0 10px 25px rgba(0,0,0,0.6);\n        }\n\n        .action-button:disabled {\n            background-color: #333;\n            cursor: not-allowed;\n            transform: none;\n            box-shadow: none;\n        }\n\n        .rating-section {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            margin-top: 30px;\n        }\n\n        .rating-section p {\n            font-size: 1.2rem;\n            margin-bottom: 10px;\n            color: var(--text-color);\n        }\n\n        .rating-buttons {\n            display: flex;\n            gap: 20px;\n            margin-top: 10px;\n        }\n\n        .rating-button {\n            background-color: var(--glass-bg);\n            border: 1px solid var(--glass-border);\n            color: var(--text-color);\n            padding: 12px 18px;\n            font-size: 1.8rem; /* Larger icons */\n            border-radius: 12px;\n            cursor: pointer;\n            box-shadow: 0 3px 12px rgba(0,0,0,0.4);\n            transition: all 0.2s ease;\n        }\n\n        .rating-button:hover {\n            transform: translateY(-3px) scale(1.1);\n            box-shadow: 0 5px 15px rgba(0,0,0,0.5);\n        }\n\n        .rating-button.active {\n            background-color: var(--rating-active-color);\n            color: white;\n            border-color: var(--rating-active-color);\n            transform: scale(1.15);\n            box-shadow: 0 6px 18px rgba(0,0,0,0.6);\n        }\n\n        #popularity-score {\n            font-size: 1.2rem;\n            color: var(--rating-text-color);\n            margin-top: 15px;\n            font-weight: bold;\n            letter-spacing: 0.5px;\n        }\n\n        .theme-indicator {\n            position: absolute;\n            top: 25px;\n            left: 25px;\n            background-color: var(--glass-bg);\n            padding: 12px 18px;\n            border-radius: 12px;\n            font-size: 1rem;\n            color: var(--theme-indicator-color);\n            border: 1px solid var(--glass-border);\n            box-shadow: 0 3px 12px rgba(0,0,0,0.4);\n            font-weight: 500;\n        }\n\n        .favorite-button {\n            position: absolute;\n            top: 25px;\n            right: 25px;\n            background: none;\n            border: none;\n            font-size: 3rem; /* Larger star */\n            cursor: pointer;\n            color: var(--favorite-btn-color);\n            transition: transform 0.2s ease, color 0.2s ease;\n            text-shadow: 0 0 10px rgba(173, 216, 230, 0.5); /* Subtle glow */\n        }\n\n        .favorite-button:hover {\n            transform: scale(1.25);\n            color: var(--favorite-btn-hover);\n        }\n\n        .share-button {\n            position: absolute;\n            bottom: 25px;\n            right: 25px;\n            background-color: var(--share-btn-color);\n            color: white;\n            border: none;\n            padding: 10px 20px;\n            font-size: 1rem;\n            border-radius: 10px;\n            cursor: pointer;\n            transition: background-color 0.3s ease, transform 0.2s ease;\n            box-shadow: 0 3px 10px rgba(0,0,0,0.3);\n        }\n\n        .share-button:hover {\n            background-color: var(--share-btn-hover);\n            transform: translateY(-3px);\n        }\n\n        footer {\n            margin-top: 50px;\n            padding: 25px;\n            background-color: var(--footer-bg);\n            color: var(--text-color);\n            width: 100%;\n            box-shadow: 0 -3px 15px rgba(0, 0, 0, 0.4);\n            transition: background-color 0.6s ease, color 0.6s ease;\n            animation: footerPulse 6s infinite alternate;\n            font-size: 1.1rem;\n            font-weight: 500;\n        }\n\n        @keyframes footerPulse {\n            0% { box-shadow: 0 -3px 15px rgba(0, 0, 0, 0.4); }\n            100% { box-shadow: 0 -3px 25px rgba(173, 216, 230, 0.6); } /* Light Blue glow */\n        }\n\n        /* New styles for the interactive fact reveal (Cosmic Scan) */\n        .fact-reveal-wrapper {\n            position: relative;\n            display: inline-block;\n            overflow: hidden;\n            border-radius: 20px;\n            box-shadow: var(--fact-of-day-glow); /* Add glow to wrapper */\n        }\n\n        .fact-reveal-overlay {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0, 0, 0, 0.6); /* Darker overlay */\n            border-radius: 20px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            color: white;\n            font-size: 1.8rem; /* Larger text */\n            font-weight: bold;\n            cursor: pointer;\n            opacity: 1;\n            transition: opacity 0.6s ease;\n            z-index: 1;\n            letter-spacing: 1px;\n        }\n\n        .fact-reveal-overlay.revealed {\n            opacity: 0;\n            pointer-events: none;\n        }\n\n        .fact-revealed {\n            filter: blur(0px) !important;\n            animation: factSettle 1.2s ease-out forwards;\n            text-shadow: var(--fact-text-shadow); /* Ensure glow on revealed fact */\n        }\n\n        @keyframes factSettle {\n            from { transform: translateY(-15px); opacity: 0.3; filter: blur(5px); }\n            to { transform: translateY(0); opacity: 1; filter: blur(0px); }\n        }\n\n        /* Cosmic Scan Effect */\n        .cosmic-scan {\n            position: absolute;\n            border: 3px solid var(--cosmic-scan-color); /* Thicker border */\n            border-radius: 50%;\n            animation: cosmicEffect 1.8s ease-out forwards; /* Slower, more pronounced */\n            opacity: 0;\n            transform: scale(0);\n            z-index: 2;\n            pointer-events: none; /* Do not interfere with clicks */\n        }\n\n        @keyframes cosmicEffect {\n            0% {\n                transform: scale(0);\n                opacity: 1;\n                box-shadow: 0 0 15px var(--cosmic-scan-color);\n            }\n            100% {\n                transform: scale(2); /* Larger scan */\n                opacity: 0;\n                box-shadow: 0 0 30px var(--cosmic-scan-color);\n            }\n        }\n\n        /* Styles for the \"Explore Further\" button */\n        .explore-further-button {\n            background-color: var(--main-action-btn);\n            color: white;\n            border: none;\n            padding: 15px 30px;\n            font-size: 1.2rem;\n            border-radius: 10px;\n            cursor: pointer;\n            box-shadow: 0 5px 15px rgba(0,0,0,0.4);\n            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;\n            margin-top: 20px;\n            font-weight: 600;\n        }\n\n        .explore-further-button:hover {\n            background-color: var(--main-action-btn-hover);\n            transform: translateY(-3px);\n            box-shadow: 0 8px 20px rgba(0,0,0,0.5);\n        }\n\n        /* Styles for Cosmic Anagrams Game */\n        .scramble-section {\n            margin-top: 40px;\n            background-color: var(--fact-card-bg);\n            border: 2px solid var(--fact-card-border);\n            border-radius: 20px;\n            padding: 30px;\n            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7);\n            width: 95%;\n            max-width: 700px;\n            transition: all 0.6s ease;\n        }\n\n        .scramble-section h2 {\n            color: var(--title-color);\n            font-size: 2.5rem;\n            margin-bottom: 25px;\n            text-shadow: var(--title-shadow);\n            letter-spacing: 1px;\n        }\n\n        #scrambled-fact-display {\n            font-size: 2rem;\n            font-weight: 500;\n            margin: 25px 0;\n            line-height: 1.4;\n            color: var(--text-color);\n            padding: 0 10px;\n        }\n\n        #scramble-input {\n            width: 85%;\n            padding: 12px;\n            font-size: 1.2rem;\n            border-radius: 10px;\n            border: 2px solid var(--scramble-input-border);\n            background-color: var(--scramble-input-bg);\n            color: var(--scramble-input-text);\n            margin-bottom: 20px;\n            text-align: center;\n            box-shadow: inset 0 1px 5px rgba(0,0,0,0.3);\n        }\n\n        #scramble-input::placeholder {\n            color: rgba(224, 224, 224, 0.6);\n        }\n\n        .scramble-buttons {\n            display: flex;\n            gap: 20px;\n            justify-content: center;\n        }\n\n        .scramble-button {\n            background-color: var(--scramble-button-bg);\n            color: white;\n            border: none;\n            padding: 12px 25px;\n            font-size: 1.2rem;\n            border-radius: 10px;\n            cursor: pointer;\n            transition: background-color 0.3s ease, transform 0.2s ease;\n            box-shadow: 0 3px 10px rgba(0,0,0,0.3);\n            font-weight: 600;\n        }\n\n        .scramble-button:hover {\n            background-color: var(--scramble-button-hover);\n            transform: translateY(-3px);\n        }\n\n        #scramble-message {\n            margin-top: 20px;\n            font-size: 1.3rem;\n            font-weight: bold;\n            letter-spacing: 0.5px;\n        }\n\n        .correct-message {\n            color: var(--scramble-message-correct);\n            text-shadow: 0 0 10px rgba(224, 224, 224, 0.7);\n        }\n\n        .incorrect-message {\n            color: var(--scramble-message-incorrect);\n            text-shadow: 0 0 8px rgba(239, 83, 80, 0.7);\n        }\n\n        /* Star Particle Effect */\n        .star-particle {\n            position: absolute;\n            background-color: var(--star-particle-color); /* Using existing color variable */\n            border-radius: 50%;\n            animation: starFall 4s ease-out forwards;\n            pointer-events: none;\n            z-index: -1;\n            filter: blur(1px);\n            opacity: 0;\n        }\n\n        @keyframes starFall {\n            0% {\n                transform: translateY(-20px) scale(0.2) rotate(0deg);\n                opacity: 0.8;\n                box-shadow: 0 0 8px var(--star-particle-color);\n            }\n            100% {\n                transform: translateY(200px) scale(1.5) rotate(180deg);\n                opacity: 0;\n                box-shadow: 0 0 20px var(--star-particle-color);\n            }\n        }\n\n        /* Fact History Feature */\n        .fact-history-container {\n            margin-top: 30px;\n            background-color: var(--fact-card-bg);\n            border: 2px solid var(--fact-card-border);\n            border-radius: 20px;\n            padding: 20px;\n            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);\n            width: 95%;\n            max-width: 700px;\n        }\n\n        .fact-history-container h3 {\n            color: var(--title-color);\n            font-size: 1.8rem;\n            margin-bottom: 15px;\n            text-shadow: var(--title-shadow);\n        }\n\n        #fact-history-display {\n            font-size: 1.1rem;\n            color: var(--text-color);\n            margin-bottom: 15px;\n            min-height: 50px; /* Ensure space even if no history */\n        }\n\n        .history-navigation-buttons {\n            display: flex;\n            justify-content: center;\n            gap: 15px;\n        }\n\n        .history-navigation-buttons button {\n            background-color: var(--main-action-btn);\n            color: white;\n            border: none;\n            padding: 10px 20px;\n            font-size: 1rem;\n            border-radius: 8px;\n            cursor: pointer;\n            transition: background-color 0.3s ease, transform 0.2s ease;\n        }\n\n        .history-navigation-buttons button:hover {\n            background-color: var(--main-action-btn-hover);\n            transform: translateY(-2px);\n        }\n\n        /* Stargazing Mode Toggle Button */\n        #stargazing-toggle {\n            position: absolute;\n            top: 25px;\n            right: 120px; /* Adjusted position */\n            background-color: var(--main-action-btn);\n            color: white;\n            border: none;\n            padding: 12px 20px;\n            font-size: 1rem;\n            border-radius: 10px;\n            cursor: pointer;\n            transition: background-color 0.3s ease, transform 0.2s ease;\n            box-shadow: 0 3px 10px rgba(0,0,0,0.3);\n            font-weight: 600;\n        }\n\n        #stargazing-toggle:hover {\n            background-color: var(--main-action-btn-hover);\n            transform: translateY(-3px);\n        }\n\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"theme-indicator\">Theme: Cosmic Wonders</div>\n        <button class=\"favorite-button\" aria-label=\"Add to favorites\">⭐</button>\n        <button id=\"stargazing-toggle\">Stargazing Mode: Off</button>\n        <h1>Cosmic Wonders</h1>\n        <div class=\"fact-card\">\n            <div class=\"fact-reveal-wrapper\" id=\"fact-reveal-wrapper\">\n                <p id=\"fact-display\" class=\"blurred-fact\">There are more stars in the universe than grains of sand on all the beaches on Earth.</p>\n                <div class=\"fact-reveal-overlay\" id=\"fact-reveal-overlay\">Initiate Cosmic Scan</div>\n            </div>\n            <button class=\"explore-further-button\" id=\"explore-further-btn\">Explore Further</button>\n            <button class=\"share-button\">Share</button>\n        </div>\n\n        <div class=\"rating-section\">\n            <p>Rate this fact:</p>\n            <div class=\"rating-buttons\">\n                <button class=\"rating-button\" data-rating=\"1\">👍</button>\n                <button class=\"rating-button\" data-rating=\"-1\">👎</button>\n            </div>\n            <p id=\"popularity-score\">Popularity Score: 0</p>\n        </div>\n\n        <!-- Cosmic Anagrams Game Section -->\n        <div class=\"scramble-section\">\n            <h2>Cosmic Anagrams</h2>\n            <p id=\"scrambled-fact-display\"></p>\n            <input type=\"text\" id=\"scramble-input\" placeholder=\"Unscramble the cosmic fact!\"></input>\n            <div class=\"scramble-buttons\">\n                <button class=\"scramble-button\" id=\"check-scramble-btn\">Check</button>\n                <button class=\"scramble-button\" id=\"new-scramble-btn\">New Fact</button>\n            </div>\n            <p id=\"scramble-message\"></p>\n        </div>\n\n        <!-- Fact History Section -->\n        <div class=\"fact-history-container\">\n            <h3>Fact History</h3>\n            <p id=\"fact-history-display\">No previous facts.</p>\n            <div class=\"history-navigation-buttons\">\n                <button id=\"prev-fact-btn\">Previous</button>\n                <button id=\"next-fact-btn\">Next</button>\n            </div>\n        </div>\n    </div>\n\n    <footer>\n        <p>Site last updated: <span id=\"update-time\"></span></p>\n    </footer>\n\n    <script>\n        document.addEventListener('DOMContentLoaded', () => {\n            const updateTimeElement = document.getElementById('update-time');\n            const now = new Date();\n            updateTimeElement.textContent = now.toLocaleString();\n\n            const factDisplay = document.getElementById('fact-display');\n            const factRevealOverlay = document.getElementById('fact-reveal-overlay');\n            const factRevealWrapper = document.getElementById('fact-reveal-wrapper');\n            const exploreFurtherBtn = document.getElementById('explore-further-btn');\n            const stargazingToggle = document.getElementById('stargazing-toggle');\n\n            const facts = [\n                \"There are more stars in the universe than grains of sand on all the beaches on Earth.\",\n                \"A day on Venus is longer than its year.\",\n                \"The largest known structure in the universe is the Hercules-Corona Borealis Great Wall.\",\n                \"Neutron stars are so dense that a teaspoon of their material would weigh about 6 billion tons.\",\n                \"The universe is estimated to be around 13.8 billion years old.\"\n            ];\n            let currentFactIndex = 0;\n            let factHistory = [];\n\n            const displayFact = (index) => {\n                factDisplay.textContent = facts[index];\n                factDisplay.classList.add('blurred-fact');\n                factDisplay.classList.remove('fact-revealed');\n                factRevealOverlay.classList.remove('revealed');\n                factRevealOverlay.textContent = 'Initiate Cosmic Scan';\n                // Reset popularity score for new fact\n                popularityScore = 0;\n                popularityScoreElement.textContent = `Popularity Score: ${popularityScore}`;\n                ratingButtons.forEach(btn => btn.classList.remove('active'));\n                updateFactHistory();\n                displayScrambledFact(); // Update anagram game with new fact\n            };\n\n            factRevealOverlay.addEventListener('click', (event) => {\n                if (!factRevealOverlay.classList.contains('revealed')) {\n                    factDisplay.classList.remove('blurred-fact');\n                    factDisplay.classList.add('fact-revealed');\n                    factRevealOverlay.classList.add('revealed');\n                    factRevealOverlay.textContent = 'Cosmic Transmission Received!';\n\n                    // Cosmic Scan Effect\n                    const scan = document.createElement('div');\n                    scan.classList.add('cosmic-scan');\n                    factRevealWrapper.appendChild(scan);\n\n                    const wrapperRect = factRevealWrapper.getBoundingClientRect();\n                    const clickX = event.clientX - wrapperRect.left;\n                    const clickY = event.clientY - wrapperRect.top;\n\n                    scan.style.left = `${clickX}px`;\n                    scan.style.top = `${clickY}px`;\n\n                    scan.addEventListener('animationend', () => {\n                        scan.remove();\n                    });\n                }\n            });\n\n            exploreFurtherBtn.addEventListener('click', () => {\n                alert('Journeying deeper into the Cosmic Wonders! (This would link to more info in a real app)');\n            });\n\n            // Rating functionality\n            let popularityScore = 0;\n            const popularityScoreElement = document.getElementById('popularity-score');\n            const ratingButtons = document.querySelectorAll('.rating-button');\n\n            ratingButtons.forEach(button => {\n                button.addEventListener('click', () => {\n                    const rating = parseInt(button.dataset.rating);\n                    popularityScore += rating;\n                    popularityScoreElement.textContent = `Popularity Score: ${popularityScore}`;\n\n                    ratingButtons.forEach(btn => btn.classList.remove('active'));\n                    button.classList.add('active');\n                });\n            });\n\n            // Cosmic Anagrams Game\n            let currentOriginalFact = facts[currentFactIndex];\n            let scrambledFact = \"\";\n\n            const scrambleFact = (fact) => {\n                const words = fact.split(' ');\n                for (let i = words.length - 1; i > 0; i--) {\n                    const j = Math.floor(Math.random() * (i + 1));\n                    [words[i], words[j]] = [words[j], words[i]];\n                }\n                return words.join(' ');\n            };\n\n            const displayScrambledFact = () => {\n                currentOriginalFact = facts[currentFactIndex];\n                scrambledFact = scrambleFact(currentOriginalFact);\n                document.getElementById('scrambled-fact-display').textContent = scrambledFact;\n                document.getElementById('scramble-input').value = '';\n                document.getElementById('scramble-message').textContent = '';\n            };\n\n            document.getElementById('check-scramble-btn').addEventListener('click', () => {\n                const userInput = document.getElementById('scramble-input').value.trim();\n                const messageElement = document.getElementById('scramble-message');\n                if (userInput.toLowerCase() === currentOriginalFact.toLowerCase()) {\n                    messageElement.textContent = 'Correct! You unscrambled the cosmic fact!';\n                    messageElement.classList.remove('incorrect-message');\n                    messageElement.classList.add('correct-message');\n                } else {\n                    messageElement.textContent = 'Incorrect, try again, cosmic explorer!';\n                    messageElement.classList.remove('correct-message');\n                    messageElement.classList.add('incorrect-message');\n                }\n            });\n\n            document.getElementById('new-scramble-btn').addEventListener('click', displayScrambledFact);\n\n            // Fact History Feature\n            const factHistoryDisplay = document.getElementById('fact-history-display');\n            const prevFactBtn = document.getElementById('prev-fact-btn');\n            const nextFactBtn = document.getElementById('next-fact-btn');\n            let historyPointer = -1; // -1 means current fact is not in history view\n\n            const updateFactHistory = () => {\n                if (!factHistory.includes(facts[currentFactIndex])) {\n                    factHistory.push(facts[currentFactIndex]);\n                }\n                historyPointer = factHistory.length - 1; // Point to the latest fact\n                renderFactHistory();\n            };\n\n            const renderFactHistory = () => {\n                if (factHistory.length === 0) {\n                    factHistoryDisplay.textContent = \"No previous facts.\";\n                    prevFactBtn.disabled = true;\n                    nextFactBtn.disabled = true;\n                } else {\n                    factHistoryDisplay.textContent = factHistory[historyPointer];\n                    prevFactBtn.disabled = historyPointer === 0;\n                    nextFactBtn.disabled = historyPointer === factHistory.length - 1;\n                }\n            };\n\n            prevFactBtn.addEventListener('click', () => {\n                if (historyPointer > 0) {\n                    historyPointer--;\n                    renderFactHistory();\n                }\n            });\n\n            nextFactBtn.addEventListener('click', () => {\n                if (historyPointer < factHistory.length - 1) {\n                    historyPointer++;\n                    renderFactHistory();\n                }\n            });\n\n            // Star Particle Effect\n            document.body.addEventListener('click', (event) => {\n                if (event.target === document.body || event.target.tagName === 'HTML') {\n                    const particle = document.createElement('div');\n                    particle.classList.add('star-particle');\n                    const size = Math.random() * 8 + 3; // Random size between 3 and 11px\n                    particle.style.width = `${size}px`;\n                    particle.style.height = `${size}px`;\n                    particle.style.left = `${event.clientX - size / 2}px`;\n                    particle.style.top = `${event.clientY - size / 2}px`;\n                    document.body.appendChild(particle);\n\n                    particle.addEventListener('animationend', () => {\n                        particle.remove();\n                    });\n                }\n            });\n\n            // Stargazing Mode Toggle\n            let isStargazingMode = false;\n            stargazingToggle.addEventListener('click', () => {\n                isStargazingMode = !isStargazingMode;\n                if (isStargazingMode) {\n                    document.body.classList.add('stargazing-mode');\n                    stargazingToggle.textContent = 'Stargazing Mode: On';\n                } else {\n                    document.body.classList.remove('stargazing-mode');\n                    stargazingToggle.textContent = 'Stargazing Mode: Off';\n                }\n            });\n\n            // Initialize with the first fact\n            displayFact(currentFactIndex);\n        });\n    </script>\n</body>\n</html>