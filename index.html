<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="site-title">Deep Sea Wonders</title>
    <style>
        :root {
            /* Deep Sea Exploration Theme Colors */
            --bg-color-primary: #0A1F2F; /* Deep Ocean Blue */
            --bg-color-secondary: #05101A; /* Abyss Dark */
            --text-color: #E0FFFF; /* Pale Aqua - Bioluminescence */
            --footer-bg: #03080F; /* Even Darker for Footer */
            --glass-bg: rgba(10, 31, 47, 0.7); /* Semi-transparent Deep Ocean Blue */
            --glass-border: rgba(224, 255, 255, 0.3); /* Soft Pale Aqua border */
            --fact-text-shadow: 0 0 15px rgba(224, 255, 255, 0.8); /* Pale Aqua glow */
            --title-color: #4DD0E1; /* Cyan - for a vibrant title */
            --title-shadow: 0 0 20px rgba(77, 208, 225, 0.7); /* Cyan glow */
            --main-action-btn: #00BCD4; /* Teal - for action buttons */
            --main-action-btn-hover: #00ACC1; /* Slightly darker Teal */
            --theme-indicator-color: #4DD0E1; /* Cyan */
            --favorite-btn-color: #4DD0E1; /* Cyan */
            --favorite-btn-hover: #26C6DA; /* Lighter Cyan */
            --share-btn-color: #4DD0E1; /* Cyan */
            --share-btn-hover: #26C6DA; /* Lighter Cyan */
            --rating-active-color: #00BCD4; /* Teal */
            --rating-text-color: #E0FFFF; /* Pale Aqua */
            --fact-card-bg: rgba(5, 16, 26, 0.8); /* Very dark, almost black with a hint of blue */
            --fact-card-border: rgba(77, 208, 225, 0.5); /* Cyan border for emphasis */
            --fact-of-day-glow: 0 0 25px rgba(77, 208, 225, 0.9); /* Strong Cyan glow */
            --stellar-scan-color: rgba(77, 208, 225, 0.9); /* Cyan scan (now Sonar Scan) */
            --scramble-input-bg: rgba(224, 255, 255, 0.1);
            --scramble-input-border: #00BCD4;
            --scramble-input-text: #E0FFFF;
            --scramble-button-bg: #00BCD4;
            --scramble-button-hover: #00ACC1;
            --scramble-message-correct: #E0FFFF;
            --scramble-message-incorrect: #EF5350; /* Red for incorrect */
            --cosmic-dust-particle-color: rgba(224, 255, 255, 0.7); /* Pale Aqua for particles (now bubbles) */
        }

        body {
            background: linear-gradient(135deg, var(--bg-color-primary) 0%, var(--bg-color-secondary) 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
            transition: background 1.5s ease-in-out, color 0.8s ease;
            overflow-x: hidden;
            position: relative;
            cursor: crosshair; /* Indicate interactivity */
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            background: var(--glass-bg);
            border-radius: 25px; /* Slightly more rounded */
            padding: 40px 60px;
            margin: auto;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6); /* Stronger shadow */
            backdrop-filter: blur(12px); /* More blur */
            border: 1px solid var(--glass-border);
            max-width: 900px; /* Wider container */
            width: 90%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 350px; /* Taller container */
            transition: all 0.6s ease;
            animation: fadeInScale 1s ease-out forwards;
            position: relative; /* For absolute positioning of theme indicator */
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        h1 {
            color: var(--title-color);
            font-size: 4rem; /* Larger title */
            margin-bottom: 25px;
            text-shadow: var(--title-shadow);
            transition: color 0.6s ease;
            letter-spacing: 2px; /* More spaced out */
        }

        #fact-display, #scramble-fact-display {
            font-size: 2.5rem; /* Larger fact text */
            font-weight: 600; /* Bolder */
            margin: 35px 0 20px 0;
            line-height: 1.5;
            text-shadow: var(--fact-text-shadow);
            color: var(--text-color);
            transition: color 0.6s ease, transform 0.6s ease, opacity 0.6s ease, filter 0.6s ease;
            opacity: 1;
            transform: translateY(0);
            padding: 0 15px; /* Add some padding */
        }

        .blurred-fact {
            filter: blur(10px); /* More blur for mystery */
            cursor: pointer;
        }

        .fact-card {
            background-color: var(--fact-card-bg);
            border: 2px solid var(--fact-card-border);
            border-radius: 20px; /* More rounded */
            padding: 30px;
            margin: 25px 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7); /* Stronger shadow */
            width: 95%;
            max-width: 700px;
            transition: all 0.6s ease;
            position: relative;
            overflow: hidden; /* For sonar scan */
        }

        .action-button {
            background-color: var(--main-action-btn);
            color: white;
            border: none;
            padding: 18px 35px; /* Larger buttons */
            font-size: 1.4rem;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 6px 18px rgba(0,0,0,0.5);\
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            margin-top: 25px;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .action-button:hover {
            background-color: var(--main-action-btn-hover);
            transform: translateY(-4px); /* More pronounced lift */
            box-shadow: 0 10px 25px rgba(0,0,0,0.6);
        }

        .action-button:disabled {
            background-color: #333;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .rating-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 30px;
        }

        .rating-section p {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .rating-buttons {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .rating-button {
            background-color: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-color);
            padding: 12px 18px;
            font-size: 1.8rem; /* Larger icons */
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 3px 12px rgba(0,0,0,0.4);
            transition: all 0.2s ease;
        }

        .rating-button:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .rating-button.active {
            background-color: var(--rating-active-color);
            color: white;
            border-color: var(--rating-active-color);
            transform: scale(1.15);
            box-shadow: 0 6px 18px rgba(0,0,0,0.6);
        }

        #popularity-score {
            font-size: 1.2rem;
            color: var(--rating-text-color);
            margin-top: 15px;
            font-weight: bold;
            letter-spacing: 0.5px;
        }

        .theme-indicator {
            position: absolute;
            top: 25px;
            left: 25px;
            background-color: var(--glass-bg);
            padding: 12px 18px;
            border-radius: 12px;
            font-size: 1rem;
            color: var(--theme-indicator-color);
            border: 1px solid var(--glass-border);
            box-shadow: 0 3px 12px rgba(0,0,0,0.4);
            font-weight: 500;
        }

        .favorite-button {
            position: absolute;
            top: 25px;
            right: 25px;
            background: none;
            border: none;
            font-size: 3rem; /* Larger star */
            cursor: pointer;
            color: var(--favorite-btn-color);
            transition: transform 0.2s ease, color 0.2s ease;
            text-shadow: 0 0 10px rgba(77, 208, 225, 0.5); /* Subtle glow */
        }

        .favorite-button:hover {
            transform: scale(1.25);
            color: var(--favorite-btn-hover);
        }

        .share-button {
            position: absolute;
            bottom: 25px;
            right: 25px;
            background-color: var(--share-btn-color);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }

        .share-button:hover {
            background-color: var(--share-btn-hover);
            transform: translateY(-3px);
        }

        footer {
            margin-top: 50px;
            padding: 25px;
            background-color: var(--footer-bg);
            color: var(--text-color);
            width: 100%;
            box-shadow: 0 -3px 15px rgba(0, 0, 0, 0.4);
            transition: background-color 0.6s ease, color 0.6s ease;
            animation: footerPulse 6s infinite alternate;
            font-size: 1.1rem;
            font-weight: 500;
        }

        @keyframes footerPulse {
            0% { box-shadow: 0 -3px 15px rgba(0, 0, 0, 0.4); }
            100% { box-shadow: 0 -3px 25px rgba(77, 208, 225, 0.6); } /* Cyan glow */
        }

        /* New styles for the interactive fact reveal (Sonar Scan) */
        .fact-reveal-wrapper {
            position: relative;
            display: inline-block;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: var(--fact-of-day-glow); /* Add glow to wrapper */
        }

        .fact-reveal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6); /* Darker overlay */
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.8rem; /* Larger text */
            font-weight: bold;
            cursor: pointer;
            opacity: 1;
            transition: opacity 0.6s ease;
            z-index: 1;
            letter-spacing: 1px;
        }

        .fact-reveal-overlay.revealed {
            opacity: 0;
            pointer-events: none;
        }

        .fact-revealed {
            filter: blur(0px) !important;
            animation: factSettle 1.2s ease-out forwards;
            text-shadow: var(--fact-text-shadow); /* Ensure glow on revealed fact */
        }

        @keyframes factSettle {
            from { transform: translateY(-15px); opacity: 0.3; filter: blur(5px); }
            to { transform: translateY(0); opacity: 1; filter: blur(0px); }
        }

        /* Sonar Scan Effect */
        .stellar-scan { /* Renamed to sonar-scan in JS, but keeping class name for CSS */
            position: absolute;
            border: 3px solid var(--stellar-scan-color); /* Thicker border */
            border-radius: 50%;
            animation: sonarEffect 1.8s ease-out forwards; /* Slower, more pronounced */
            opacity: 0;
            transform: scale(0);
            z-index: 2;
            pointer-events: none; /* Do not interfere with clicks */
        }

        @keyframes sonarEffect {
            0% {
                transform: scale(0);
                opacity: 1;
                box-shadow: 0 0 15px var(--stellar-scan-color);
            }
            100% {
                transform: scale(2); /* Larger scan */
                opacity: 0;
                box-shadow: 0 0 30px var(--stellar-scan-color);
            }
        }

        /* Styles for the "Explore Further" button */
        .explore-further-button {
            background-color: var(--main-action-btn);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            margin-top: 20px;
            font-weight: 600;
        }

        .explore-further-button:hover {
            background-color: var(--main-action-btn-hover);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.5);
        }

        /* Styles for Deep Sea Anagrams Game */
        .scramble-section {
            margin-top: 40px;
            background-color: var(--fact-card-bg);
            border: 2px solid var(--fact-card-border);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7);
            width: 95%;
            max-width: 700px;
            transition: all 0.6s ease;
        }

        .scramble-section h2 {
            color: var(--title-color);
            font-size: 2.5rem;
            margin-bottom: 25px;
            text-shadow: var(--title-shadow);
            letter-spacing: 1px;
        }

        #scrambled-fact-display {
            font-size: 2rem;
            font-weight: 500;
            margin: 25px 0;
            line-height: 1.4;
            color: var(--text-color);
            padding: 0 10px;
        }

        #scramble-input {
            width: 85%;
            padding: 12px;
            font-size: 1.2rem;
            border-radius: 10px;
            border: 2px solid var(--scramble-input-border);
            background-color: var(--scramble-input-bg);
            color: var(--scramble-input-text);
            margin-bottom: 20px;
            text-align: center;
            box-shadow: inset 0 1px 5px rgba(0,0,0,0.3);
        }

        #scramble-input::placeholder {
            color: rgba(224, 255, 255, 0.6);
        }

        .scramble-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .scramble-button {
            background-color: var(--scramble-button-bg);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            font-weight: 600;
        }

        .scramble-button:hover {
            background-color: var(--scramble-button-hover);
            transform: translateY(-3px);
        }

        #scramble-message {
            margin-top: 20px;
            font-size: 1.3rem;
            font-weight: bold;
            letter-spacing: 0.5px;
        }

        .correct-message {
            color: var(--scramble-message-correct);
            text-shadow: 0 0 10px rgba(224, 255, 255, 0.7);
        }

        .incorrect-message {
            color: var(--scramble-message-incorrect);
            text-shadow: 0 0 8px rgba(239, 83, 80, 0.7);
        }

        /* Deep Sea Bubbles Particle Effect */
        .cosmic-dust-particle { /* Renamed to deep-sea-bubble in JS, but keeping class name for CSS */
            position: absolute;
            background-color: var(--cosmic-dust-particle-color);
            border-radius: 50%;
            animation: bubbleRise 4s ease-out forwards; /* Slower rise */
            pointer-events: none;
            z-index: -1; /* Behind everything */
            filter: blur(2px);
            opacity: 0; /* Start invisible */
        }

        @keyframes bubbleRise {
            0% {
                transform: translateY(0) scale(0.2);
                opacity: 0.5;
                box-shadow: 0 0 5px var(--cosmic-dust-particle-color);
            }
            50% {
                opacity: 0.8;
                transform: translateY(-50px) scale(1);
            }
            100% {
                transform: translateY(-200px) scale(1.5); /* Rise further */
                opacity: 0;
                box-shadow: 0 0 15px var(--cosmic-dust-particle-color);
            }
        }

    </style>
</head>
<body>
    <div class="container">
        <div class="theme-indicator">Theme: Deep Sea Exploration</div>
        <button class="favorite-button" aria-label="Add to favorites">⭐</button>
        <h1>Deep Sea Wonders</h1>
        <div class="fact-card">
            <div class="fact-reveal-wrapper" id="fact-reveal-wrapper">
                <p id="fact-display" class="blurred-fact">The Mariana Trench is the deepest oceanic trench on Earth. Its deepest point, Challenger Deep, is about 11,000 meters (36,000 feet) below sea level, which is deeper than Mount Everest is tall.</p>
                <div class="fact-reveal-overlay" id="fact-reveal-overlay">Initiate Sonar Scan</div>
            </div>
            <button class="explore-further-button" id="explore-further-btn">Explore Further</button>
            <button class="share-button">Share</button>
        </div>

        <div class="rating-section">
            <p>Rate this fact:</p>
            <div class="rating-buttons">
                <button class="rating-button" data-rating="1">👍</button>
                <button class="rating-button" data-rating="-1">👎</button>
            </div>
            <p id="popularity-score">Popularity Score: 0</p>
        </div>

        <!-- Deep Sea Anagrams Game Section -->
        <div class="scramble-section">
            <h2>Deep Sea Anagrams</h2>
            <p id="scrambled-fact-display"></p>
            <input type="text" id="scramble-input" placeholder="Unscramble the deep sea fact!"></input>
            <div class="scramble-buttons">
                <button class="scramble-button" id="check-scramble-btn">Check</button>
                <button class="scramble-button" id="new-scramble-btn">New Fact</button>
            </div>
            <p id="scramble-message"></p>
        </div>
    </div>

    <footer>
        <p>Site last updated: <span id="update-time"></span></p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const updateTimeElement = document.getElementById('update-time');
            const now = new Date();
            updateTimeElement.textContent = now.toLocaleString();

            const factDisplay = document.getElementById('fact-display');
            const factRevealOverlay = document.getElementById('fact-reveal-overlay');
            const factRevealWrapper = document.getElementById('fact-reveal-wrapper');
            const exploreFurtherBtn = document.getElementById('explore-further-btn');

            factRevealOverlay.addEventListener('click', (event) => {
                if (!factRevealOverlay.classList.contains('revealed')) {
                    factDisplay.classList.remove('blurred-fact');
                    factDisplay.classList.add('fact-revealed');
                    factRevealOverlay.classList.add('revealed');
                    factRevealOverlay.textContent = 'Sonar Transmission Received!';

                    // Sonar Scan Effect
                    const scan = document.createElement('div');
                    scan.classList.add('stellar-scan'); // Reusing class for animation
                    factRevealWrapper.appendChild(scan);

                    const wrapperRect = factRevealWrapper.getBoundingClientRect();
                    const clickX = event.clientX - wrapperRect.left;
                    const clickY = event.clientY - wrapperRect.top;

                    scan.style.left = `${clickX}px`;
                    scan.style.top = `${clickY}px`;

                    scan.addEventListener('animationend', () => {
                        scan.remove();
                    });
                }
            });

            exploreFurtherBtn.addEventListener('click', () => {
                alert('Diving deeper into the ocean\'s mysteries! (This would link to more info in a real app)');
            });

            // Rating functionality
            let popularityScore = 0;
            const popularityScoreElement = document.getElementById('popularity-score');
            const ratingButtons = document.querySelectorAll('.rating-button');

            ratingButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const rating = parseInt(button.dataset.rating);
                    popularityScore += rating;
                    popularityScoreElement.textContent = `Popularity Score: ${popularityScore}`;

                    ratingButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                });
            });

            // Deep Sea Anagrams Game
            const originalFact = "The Mariana Trench is the deepest oceanic trench on Earth. Its deepest point, Challenger Deep, is about 11,000 meters (36,000 feet) below sea level, which is deeper than Mount Everest is tall.";
            let scrambledFact = "";

            const scrambleFact = (fact) => {
                const words = fact.split(' ');
                for (let i = words.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [words[i], words[j]] = [words[j], words[i]];
                }
                return words.join(' ');
            };

            const displayScrambledFact = () => {
                scrambledFact = scrambleFact(originalFact);
                document.getElementById('scrambled-fact-display').textContent = scrambledFact;
                document.getElementById('scramble-input').value = '';
                document.getElementById('scramble-message').textContent = '';
            };

            document.getElementById('check-scramble-btn').addEventListener('click', () => {
                const userInput = document.getElementById('scramble-input').value.trim();
                const messageElement = document.getElementById('scramble-message');
                if (userInput.toLowerCase() === originalFact.toLowerCase()) {
                    messageElement.textContent = 'Correct! You unscrambled the deep sea fact!';
                    messageElement.classList.remove('incorrect-message');
                    messageElement.classList.add('correct-message');
                } else {
                    messageElement.textContent = 'Incorrect, try again, deep sea explorer!';
                    messageElement.classList.remove('correct-message');
                    messageElement.classList.add('incorrect-message');
                }
            });

            document.getElementById('new-scramble-btn').addEventListener('click', displayScrambledFact);

            displayScrambledFact(); // Initialize the scramble game on load

            // Deep Sea Bubbles Particle Feature
            document.body.addEventListener('click', (event) => {
                if (event.target === document.body || event.target.tagName === 'HTML') { // Only trigger on body clicks
                    const particle = document.createElement('div');
                    particle.classList.add('cosmic-dust-particle'); // Reusing class for animation
                    const size = Math.random() * 10 + 5; // Random size between 5 and 15px
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    particle.style.left = `${event.clientX - size / 2}px`;
                    particle.style.top = `${event.clientY - size / 2}px`;
                    document.body.appendChild(particle);

                    particle.addEventListener('animationend', () => {
                        particle.remove();
                    });
                }
            });
        });
    </script>
</body>
</html>