<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Wonders: Fascinating Facts</title>
    <style>
        :root {
            /* Theme Colors for "It rains diamonds on Jupiter and Saturn." */
            --bg-gradient: linear-gradient(135deg, #2F4F4F, #4682B4); /* Dark Slate Gray to Steel Blue */
            --text-color: #E0FFFF; /* Light Cyan */
            --footer-bg: #223333; /* Darker Slate Gray */
            --glass-bg: rgba(47, 79, 79, 0.6);
            --glass-border: rgba(224, 255, 255, 0.4);
            --fact-text-shadow: 2px 2px 15px rgba(0,0,0,0.9);
            --title-color: #E0FFFF; /* Light Cyan */
            --title-shadow: 4px 4px 25px rgba(0, 0, 0, 0.9);
            --button-primary: #4B0082; /* Indigo */
            --button-hover: #8A2BE2; /* Blue Violet */
            --main-action-btn: #E0FFFF; /* Light Cyan */
            --main-action-btn-hover: #AFEEEE; /* Pale Turquoise */
            --quiz-option-btn: #4B0082;
            --quiz-option-btn-hover: #8A2BE2;
            --quiz-correct: #32CD32;
            --quiz-incorrect: #FF4500;
            --challenge-timer-progress: #E0FFFF;
            --challenge-streak-color: #ADFF2F;
            --history-toggle-color: #E0FFFF; /* Light Cyan for footer text */
            --history-list-color: #B0E0E6; /* Powder Blue */
            --reveal-overlay-color: rgba(0, 0, 0, 0.8); /* Dark overlay for hidden fact */
        }

        body {
            background: var(--bg-gradient);
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
            transition: background 0.8s ease-in-out, color 0.5s ease;
            overflow-x: hidden;
        }
        .container {
            max-width: 1000px;
            width: 100%;
            margin-bottom: 20px;
            padding: 50px;
            background-color: var(--glass-bg);
            border-radius: 25px;
            box-shadow: 0 15px 50px 0 rgba( 0, 0, 0, 0.5 );
            backdrop-filter: blur( 12px );
            -webkit-backdrop-filter: blur( 12px );
            border: 1px solid var(--glass-border);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        .container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(255,255,255,0.08) 10%, transparent 70%);
            animation: rotateBackground 25s linear infinite;
            opacity: 0.4;
        }
        @keyframes rotateBackground {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        h1#main-title {
            font-size: 6rem;
            margin-bottom: 3rem;
            text-shadow: var(--title-shadow);
            color: var(--title-color);
            letter-spacing: 4px;
            font-weight: 900;
        }
        .fact-card {
            background-color: rgba(10, 0, 20, 0.7);
            padding: 45px;
            border-radius: 25px;
            margin-bottom: 35px;
            width: 90%;
            max-width: 850px;
            box-shadow: 0 0 40px rgba(0,0,0,0.7), inset 0 0 20px rgba(0,0,0,0.7);
            position: relative;
            overflow: hidden;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        p {
            font-size: 2.8rem;
            line-height: 1.6;
            margin-bottom: 2.5rem;
            cursor: default;
            transition: transform 0.3s ease-in-out, color 0.3s ease-in-out;
            text-shadow: var(--fact-text-shadow);
            font-weight: 600;
        }
        #main-fact, #quiz-fact, #challenge-fact {
            animation: fadeInScale 1.5s ease-out forwards;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes slideInFromBottom {
            from { transform: translateY(120%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        #footer-info {
            font-size: 1.5rem;
            color: var(--history-toggle-color);
            background-color: var(--footer-bg);
            padding: 25px 50px;
            border-radius: 20px;
            opacity: 0.98;
            margin-top: 50px;
            animation: slideInFromBottom 1s ease-out forwards;
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.5);
            font-weight: 700;
            transition: background-color 0.5s ease, color 0.5s ease;
        }
        #fact-of-the-day-container {
            margin-top: 30px;
            margin-bottom: 30px;
            padding: 35px 45px;
            background-color: var(--glass-bg);
            border-radius: 25px;
            box-shadow: 0 10px 35px rgba(0,0,0,0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            cursor: default;
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
            max-width: 900px;
            width: 90%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }
        #fact-of-the-day-text {
            font-size: 2.6rem;
            color: var(--text-color);
            background-color: transparent;
            padding: 15px 25px;
            border-radius: 12px;
            font-style: italic;
            font-weight: 700;
            text-shadow: var(--fact-text-shadow);
            transition: color 1s ease, background-color 1s ease, filter 1s ease, opacity 1s ease;
            line-height: 1.5;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        #fact-of-the-day-text.hidden-fact {
            filter: blur(10px);
            opacity: 0.2;
            color: transparent;
            text-shadow: none;
        }
        #fact-of-the-day-text::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--reveal-overlay-color);
            border-radius: 12px;
            opacity: 0;
            transition: opacity 1s ease;
            z-index: -1;
        }
        #fact-of-the-day-text.hidden-fact::before {
            opacity: 1;
        }
        #did-you-know {
            margin-top: 30px;
            padding-top: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.3);
            text-align: left;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 1s ease-out, opacity 1s ease-out, transform 1s ease-out;
            transform: translateY(30px);
        }
        #did-you-know.show-did-you-know {
            max-height: 350px;
            opacity: 1;
            transform: translateY(0);
        }
        #did-you-know h3 {
            font-size: 1.8rem;
            color: hsl(40, 100%, 80%);
            margin-bottom: 12px;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.4);
        }
        #did-you-know-content {
            font-size: 1.3rem;
            color: var(--history-list-color);
            line-height: 1.6;
            margin-bottom: 0;
        }

        /* Quiz Specific Styles */
        #fact-challenge-area h2 {
            font-size: 3.2rem;
            margin-bottom: 2rem;
            color: var(--title-color);
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
        }
        #quiz-fact, #challenge-fact {
            font-size: 2rem;
            margin-bottom: 3rem;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #challenge-options {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        .challenge-option-btn {
            background-color: var(--quiz-option-btn);
            color: #FFFFFF;
            padding: 18px 35px;
            font-size: 1.3rem;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            min-width: 160px;
            box-shadow: 0 5px 12px rgba(0,0,0,0.3);
        }
        .challenge-option-btn:hover {
            background-color: var(--quiz-option-btn-hover);
            transform: translateY(-4px);
        }
        .challenge-option-btn.correct {
            background-color: var(--quiz-correct);
            box-shadow: 0 0 20px var(--quiz-correct);
        }
        .challenge-option-btn.incorrect {
            background-color: var(--quiz-incorrect);
            box-shadow: 0 0 20px var(--quiz-incorrect);
        }
        .quiz-feedback {
            font-size: 1.6rem;
            margin-top: 25px;
            font-weight: 800;
            animation: fadeIn 0.6s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Challenge Specific Styles */
        #challenge-timer-bar {
            width: 100%;
            height: 12px;
            background-color: rgba(255,255,255,0.25);
            border-radius: 6px;
            margin-bottom: 25px;
            overflow: hidden;
        }
        #challenge-timer-progress {
            height: 100%;
            width: 100%;
            background-color: var(--challenge-timer-progress);
            border-radius: 6px;
            transition: width linear;
        }
        #challenge-score {
            font-size: 2rem;
            color: var(--challenge-streak-color);
            margin-bottom: 20px;
            font-weight: 800;
            text-shadow: 1px 1px 6px rgba(0,0,0,0.5);
        }
        #challenge-feedback {
            font-size: 1.8rem;
            margin-top: 25px;
            font-weight: 800;
            animation: fadeIn 0.6s ease-out;
        }

        /* History Section */
        #history-section {
            margin-top: 35px;
            width: 100%;
            max-width: 850px;
            text-align: left;
        }
        #history-toggle-btn {
            background-color: var(--button-primary);
            color: var(--history-toggle-color);
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            margin-bottom: 25px;
            box-shadow: 0 5px 12px rgba(0,0,0,0.3);
        }
        #history-toggle-btn:hover {
            background-color: var(--button-hover);
            transform: translateY(-3px);
        }
        #history-list {
            list-style: none;
            padding: 0;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 1s ease-out, opacity 1s ease-out;
            background-color: rgba(255, 255, 255, 0.08);
            border-radius: 18px;
            padding: 0 25px;
            box-shadow: inset 0 0 12px rgba(0,0,0,0.3);
        }
        #history-list.show-history {
            max-height: 600px;
            opacity: 1;
            padding: 25px;
        }
        #history-list li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            color: var(--history-list-color);\n            font-size: 1.1rem;\n        }\n        #history-list li:last-child {\n            border-bottom: none;\n        }\n\n        /* Buttons */\n        .btn {\n            background-color: var(--button-primary);\n            color: #FFFFFF;\n            padding: 18px 35px;\n            font-size: 1.3rem;\n            border: none;\n            border-radius: 12px;\n            cursor: pointer;\n            transition: background-color 0.3s, transform 0.2s;\n            margin: 12px;\n            box-shadow: 0 5px 12px rgba(0,0,0,0.3);\n        }\n        .btn:hover {\n            background-color: var(--button-hover);\n            transform: translateY(-4px);\n        }\n        .main-action-btn {\n            background-color: var(--main-action-btn);\n            font-size: 1.6rem;\n            padding: 20px 40px;\n            font-weight: 800;\n            letter-spacing: 1.5px;\n            color: var(--button-primary); /* Text color for main action button */\n        }\n        .main-action-btn:hover {\n            background-color: var(--main-action-btn-hover);\n            transform: translateY(-5px) scale(1.03);\n        }\n\n        /* Responsive adjustments */\n        @media (max-width: 768px) {\n            h1#main-title {\n                font-size: 4rem;\n                margin-bottom: 2rem;\n            }\n            .container {\n                padding: 25px;\n            }\n            .fact-card {\n                padding: 30px;\n                min-height: 250px;\n            }\n            p {\n                font-size: 2rem;\n                margin-bottom: 2rem;\n            }\n            #fact-of-the-day-text {\n                font-size: 2rem;\n            }\n            #footer-info {\n                font-size: 1.1rem;\n                padding: 18px 30px;\n            }\n            .btn, .challenge-option-btn {\n                padding: 15px 25px;\n                font-size: 1.1rem;\n            }\n            .main-action-btn {\n                font-size: 1.3rem;\n                padding: 18px 30px;\n            }\n            #did-you-know h3 {\n                font-size: 1.6rem;\n            }\n            #did-you-know-content {\n                font-size: 1.1rem;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1 id=\"main-title\">Cosmic Wonders</h1>\n\n        <div id=\"fact-of-the-day-container\">\n            <p id=\"fact-of-the-day-text\">It rains diamonds on Jupiter and Saturn.</p>\n            <div id=\"challenge-buttons\" style=\"margin-top: 20px;\">\n                <button id=\"show-details-btn\" class=\"btn main-action-btn\">Show Details</button>\n                <button id=\"generate-fact-btn\" class=\"btn\">Generate New Fact</button>\n                <button id=\"play-challenge-btn\" class=\"btn\">Play Fact Challenge</button>\n            </div>\n            <div id=\"did-you-know\">\n                <h3>Did You Know?</h3>\n                <p id=\"did-you-know-content\">Scientists believe that in the atmospheres of Jupiter and Saturn, lightning storms turn methane into soot, which is then compressed into graphite and then diamonds as it falls.</p>\n            </div>\n        </div>\n\n        <!-- New Feature: Fact Quiz -->\n        <div id=\"fact-challenge-area\" class=\"container\" style=\"display: none; margin-top: 40px;\">\n            <h2>Fact Challenge!</h2>\n            <p id=\"quiz-fact\"></p>\n            <div id=\"challenge-options\"></div>\n            <div class=\"quiz-feedback\" id=\"quiz-feedback\"></div>\n            <button id=\"next-fact-btn\" class=\"btn\" style=\"display: none; margin-top: 20px;\">Next Fact</button>\n        </div>\n\n        <!-- History Section -->\n        <div id=\"history-section\">\n            <button id=\"history-toggle-btn\">Show Fact History</button>\n            <ul id=\"history-list\">\n                <!-- History items will be dynamically added here -->\n            </ul>\n        </div>\n    </div>\n\n    <footer id=\"footer-info\">\n        Site last updated: <span id=\"last-updated-time\"></span>\n    </footer>\n\n    <script>\n        const factOfTheDayText = document.getElementById(\'fact-of-the-day-text\');\n        const showDetailsBtn = document.getElementById(\'show-details-btn\');\n        const generateFactBtn = document.getElementById(\'generate-fact-btn\');\n        const playChallengeBtn = document.getElementById(\'play-challenge-btn\');\n        const didYouKnow = document.getElementById(\'did-you-know\');\n        const didYouKnowContent = document.getElementById(\'did-you-know-content\');\n        const lastUpdatedTime = document.getElementById(\'last-updated-time\');\n        const historyToggleBtn = document.getElementById(\'history-toggle-btn\');\n        const historyList = document.getElementById(\'history-list\');\n        const factChallengeArea = document.getElementById(\'fact-challenge-area\');\n        const factOfTheDayContainer = document.getElementById(\'fact-of-the-day-container\');\n        const quizFactElement = document.getElementById(\'quiz-fact\');\n        const challengeOptionsDiv = document.getElementById(\'challenge-options\');\n        const quizFeedbackDiv = document.getElementById(\'quiz-feedback\');\n        const nextFactBtn = document.getElementById(\'next-fact-btn\');\n\n        const facts = [\n            {\n                fact: \"A black hole the size of a marble would weigh more than the Earth.\",\n                details: \"If a black hole the size of a marble were to exist, its immense density would give it a gravitational pull exceeding that of our entire planet, despite its tiny size.\",\n                theme: {\n                    bgGradient: \'linear-gradient(135deg, #0A0A2A, #200040)\',\n                    textColor: \'#E0FFFF\',\n                    footerBg: \'#150030\',\n                    glassBg: \'rgba(32, 0, 64, 0.6)\',\n                    glassBorder: \'rgba(224, 255, 255, 0.4)\',\n                    buttonPrimary: \'#4B0082\',\n                    buttonHover: \'#8A2BE2\',\n                    mainActionBtn: \'#E0FFFF\',\n                    mainActionBtnHover: \'#AFEEEE\',\n                    historyToggleColor: \'#E0FFFF\',\n                    historyListColor: \'#B0E0E6\',\n                    revealOverlayColor: \'rgba(0, 0, 0, 0.8)\'\n                }\n            },\n            {\n                fact: \"It rains diamonds on Jupiter and Saturn.\",\n                details: \"Scientists believe that in the atmospheres of Jupiter and Saturn, lightning storms turn methane into soot, which is then compressed into graphite and then diamonds as it falls.\",\n                theme: {\n                    bgGradient: \'linear-gradient(135deg, #2F4F4F, #4682B4)\',\n                    textColor: \'#E0FFFF\',\n                    footerBg: \'#223333\',\n                    glassBg: \'rgba(47, 79, 79, 0.6)\',\n                    glassBorder: \'rgba(224, 255, 255, 0.4)\',\n                    buttonPrimary: \'#5F9EA0\',\n                    buttonHover: \'#7FFFD4\',\n                    mainActionBtn: \'#E0FFFF\',\n                    mainActionBtnHover: \'#AFEEEE\',\n                    historyToggleColor: \'#E0FFFF\',\n                    historyListColor: \'#B0E0E6\',\n                    revealOverlayColor: \'rgba(0, 0, 0, 0.8)\'\n                }\n            },\n            {\n                fact: \"The universe is thought to be flat.\",\n                details: \"Current cosmological data suggests that the universe is spatially flat, meaning that parallel lines will always remain parallel, unlike a curved or spherical universe.\",\n                theme: {\n                    bgGradient: \'linear-gradient(135deg, #1A2A3A, #3A4A5A)\',\n                    textColor: \'#F0F8FF\',\n                    footerBg: \'#101A20\',\n                    glassBg: \'rgba(26, 42, 58, 0.6)\',\n                    glassBorder: \'rgba(240, 248, 255, 0.4)\',\n                    buttonPrimary: \'#4682B4\',\n                    buttonHover: \'#6A9ACD\',\n                    mainActionBtn: \'#F0F8FF\',\n                    mainActionBtnHover: \'#D0E0F0\',\n                    historyToggleColor: \'#F0F8FF\',\n                    historyListColor: \'#B0C4DE\',\n                    revealOverlayColor: \'rgba(0, 0, 0, 0.8)\'\n                }\n            },\n            {\n                fact: \"There are more stars than grains of sand on all the beaches on Earth.\",\n                details: \"Astronomers estimate there are about 100 billion to 400 billion stars in our Milky Way galaxy alone, and there are billions of galaxies in the observable universe. This number vastly exceeds the estimated number of sand grains on Earth.\",\n                theme: {\n                    bgGradient: \'linear-gradient(135deg, #000000, #2C003E)\',\n                    textColor: \'#FFD700\',\n                    footerBg: \'#1A002A\',\n                    glassBg: \'rgba(0, 0, 0, 0.7)\',\n                    glassBorder: \'rgba(255, 215, 0, 0.4)\',\n                    buttonPrimary: \'#800080\',\n                    buttonHover: \'#BA55D3\',\n                    mainActionBtn: \'#FFD700\',\n                    mainActionBtnHover: \'#FFEC8B\',\n                    historyToggleColor: \'#FFD700\',\n                    historyListColor: \'#DA70D6\',\n                    revealOverlayColor: \'rgba(0, 0, 0, 0.8)\'\n                }\n            }\n        ];\n\n        const challengeFacts = [\n            {\n                fullFact: \"It rains diamonds on Jupiter and Saturn.\",\n                challenge: \"It rains ______ on Jupiter and Saturn.\",\n                missingWord: \"diamonds\",\n                options: [\"water\", \"diamonds\", \"methane\", \"iron\"],\n                theme: facts[1].theme // Use the same theme as the original fact\n            },\n            {\n                fullFact: \"A black hole the size of a marble would weigh more than the Earth.\",\n                challenge: \"A black hole the size of a marble would weigh more than the ______.\",\n                missingWord: \"Earth\",\n                options: [\"Sun\", \"Moon\", \"Earth\", \"Jupiter\"],\n                theme: facts[0].theme\n            },\n            {\n                fullFact: \"The universe is thought to be flat.\",\n                challenge: \"The universe is thought to be ______.\",\n                missingWord: \"flat\",\n                options: [\"round\", \"flat\", \"curved\", \"spherical\"],\n                theme: facts[2].theme\n            },\n            {\n                fullFact: \"There are more stars than grains of sand on all the beaches on Earth.\",\n                challenge: \"There are more stars than grains of ______ on all the beaches on Earth.\",
                missingWord: \"sand\",
                options: [\"dust\", \"salt\", \"sand\", \"pebbles\"],
                theme: facts[3].theme
            }
        ];

        let currentFactIndex = 0;
        let currentChallengeFactIndex = 0;
        let factHistory = [];

        function applyTheme(theme) {
            const root = document.documentElement;
            for (const [key, value] of Object.entries(theme)) {
                root.style.setProperty(`--${key}`, value);
            }
        }

        function displayFact(factObj) {
            factOfTheDayText.textContent = factObj.fact;
            didYouKnowContent.textContent = factObj.details;
            applyTheme(factObj.theme);

            // Reset for show/hide details feature
            didYouKnow.classList.remove('show-did-you-know');
            showDetailsBtn.textContent = "Show Details";
            showDetailsBtn.onclick = showDetails;

            // Add to history
            factHistory.unshift(factObj.fact); // Add to the beginning
            updateHistoryList();
        }

        function showDetails() {
            didYouKnow.classList.add('show-did-you-know');
            showDetailsBtn.textContent = "Hide Details";
            showDetailsBtn.onclick = hideDetails;
        }

        function hideDetails() {
            didYouKnow.classList.remove('show-did-you-know');
            showDetailsBtn.textContent = "Show Details";
            showDetailsBtn.onclick = showDetails;
        }

        function generateNewFact() {
            factChallengeArea.style.display = 'none';
            factOfTheDayContainer.style.display = 'flex';

            let newIndex;
            do {
                newIndex = Math.floor(Math.random() * facts.length);
            } while (newIndex === currentFactIndex); // Ensure a different fact
            currentFactIndex = newIndex;
            displayFact(facts[currentFactIndex]);
        }

        function updateHistoryList() {
            historyList.innerHTML = '';
            factHistory.forEach(fact => {
                const listItem = document.createElement('li');
                listItem.textContent = fact;
                historyList.appendChild(listItem);
            });
        }

        function updateLastUpdatedTime() {
            const now = new Date();
            lastUpdatedTime.textContent = now.toLocaleString();
        }

        // Fact Challenge Logic
        function startFactChallenge() {
            factOfTheDayContainer.style.display = 'none';
            factChallengeArea.style.display = 'flex';
            currentChallengeFactIndex = Math.floor(Math.random() * challengeFacts.length);
            displayChallengeFact(challengeFacts[currentChallengeFactIndex]);
        }

        function displayChallengeFact(challengeFactObj) {
            quizFactElement.textContent = challengeFactObj.challenge;
            challengeOptionsDiv.innerHTML = '';
            quizFeedbackDiv.textContent = '';
            nextFactBtn.style.display = 'none';
            applyTheme(challengeFactObj.theme); // Apply theme for challenge

            challengeFactObj.options.forEach(option => {
                const button = document.createElement('button');
                button.classList.add('challenge-option-btn');
                button.textContent = option;
                button.onclick = () => checkAnswer(button, option, challengeFactObj.missingWord);
                challengeOptionsDiv.appendChild(button);
            });
        }

        function checkAnswer(selectedButton, selectedOption, missingWord) {
            Array.from(challengeOptionsDiv.children).forEach(button => {
                button.disabled = true; // Disable all buttons after selection
                if (button.textContent === missingWord) {
                    button.classList.add('correct');
                } else {
                    button.classList.add('incorrect');
                }
            });

            if (selectedOption === missingWord) {
                quizFeedbackDiv.textContent = "Correct! Well done!";
                quizFeedbackDiv.style.color = 'var(--quiz-correct)';
            } else {
                quizFeedbackDiv.textContent = `Incorrect. The answer was '${missingWord}'.`;
                quizFeedbackDiv.style.color = 'var(--quiz-incorrect)';
            }
            nextFactBtn.style.display = 'block';
        }

        function nextChallengeFact() {
            let newIndex;
            do {
                newIndex = Math.floor(Math.random() * challengeFacts.length);
            } while (newIndex === currentChallengeFactIndex);
            currentChallengeFactIndex = newIndex;
            displayChallengeFact(challengeFacts[currentChallengeFactIndex]);
        }

        // Event Listeners
        showDetailsBtn.addEventListener('click', showDetails);
        generateFactBtn.addEventListener('click', generateNewFact);
        playChallengeBtn.addEventListener('click', startFactChallenge);
        nextFactBtn.addEventListener('click', nextChallengeFact);
        historyToggleBtn.addEventListener('click', () => {
            historyList.classList.toggle('show-history');
            historyToggleBtn.textContent = historyList.classList.contains('show-history') ? 'Hide Fact History' : 'Show Fact History';
        });

        // Initial load
        document.addEventListener('DOMContentLoaded', () => {
            currentFactIndex = 1; // Start with "It rains diamonds..."
            displayFact(facts[currentFactIndex]);
            updateLastUpdatedTime();
            setInterval(updateLastUpdatedTime, 60000); // Update every minute
        });
    </script>
</body>
</html>