<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="site-title">Mysteries of the Deep Sea</title>
    <style>
        :root {
            /* Mysteries of the Deep Sea Theme Colors */
            --bg-color-primary: #0A1931; /* Very Dark Blue */
            --bg-color-secondary: #152A46; /* Darker Blue */
            --text-color: #E0F2F7; /* Light Cyan/Aqua */
            --footer-bg: #050F1A; /* Almost Black Blue */
            --glass-bg: rgba(10, 25, 49, 0.7); /* Semi-transparent dark blue */
            --glass-border: rgba(224, 242, 247, 0.3); /* Light border */
            --fact-text-shadow: 2px 2px 15px rgba(0,0,0,0.9);
            --title-color: #00BCD4; /* Cyan/Turquoise */
            --title-shadow: 4px 4px 25px rgba(0, 0, 0, 0.9);
            --main-action-btn: #00BCD4; /* Cyan/Turquoise */
            --main-action-btn-hover: #00838F; /* Darker Cyan */
            --theme-indicator-color: #00BCD4; /* Cyan/Turquoise */
            --favorite-btn-color: #FFD700; /* Gold for favorite */
            --favorite-btn-hover: #B8860B; /* Dark Goldenrod */
            --share-btn-color: #20B2AA; /* Light Sea Green */
            --share-btn-hover: #1A8B84; /* Darker Light Sea Green */
            --rating-active-color: #00BCD4; /* Cyan/Turquoise */
            --rating-text-color: #E0F2F7; /* Light Cyan */
            --category-select-bg: #152A46; /* Darker Blue for select */
            --category-select-border: #00BCD4; /* Cyan border */
        }

        body {
            background: linear-gradient(135deg, var(--bg-color-primary) 0%, var(--bg-color-secondary) 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
            transition: background 1.5s ease-in-out, color 0.8s ease;
            overflow-x: hidden;
            position: relative;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            background: var(--glass-bg);
            border-radius: 20px;
            padding: 40px 60px;
            margin: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            max-width: 800px;
            width: 90%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 300px;
            transition: all 0.5s ease;
            animation: fadeInScale 0.8s ease-out forwards;
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        h1 {
            color: var(--title-color);
            font-size: 3.5rem;
            margin-bottom: 20px;
            text-shadow: var(--title-shadow);
            transition: color 0.5s ease;
        }

        #fact-display {
            font-size: 2.2rem;
            font-weight: 500;
            margin: 30px 0 15px 0;
            line-height: 1.4;
            text-shadow: var(--fact-text-shadow);
            color: var(--text-color);
            transition: color 0.5s ease, transform 0.5s ease, opacity 0.5s ease;
            opacity: 0;
            transform: translateY(20px);
        }

        #fact-display.revealed {
            opacity: 1;
            transform: translateY(0);
        }

        .action-button {
            background-color: var(--main-action-btn);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.3rem;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            margin-top: 20px;
        }

        .action-button:hover {
            background-color: var(--main-action-btn-hover);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.5);
        }

        .action-button:disabled {
            background-color: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .rating-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }

        .rating-buttons {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .rating-button {
            background-color: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-color);
            padding: 10px 15px;
            font-size: 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            transition: all 0.2s ease;
        }

        .rating-button:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
        }

        .rating-button.active {
            background-color: var(--rating-active-color);
            color: white;
            border-color: var(--rating-active-color);
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        #popularity-score {
            font-size: 1.1rem;
            color: var(--rating-text-color);
            margin-top: 10px;
            font-weight: bold;
        }

        .theme-indicator {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: var(--glass-bg);
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 0.9rem;
            color: var(--theme-indicator-color);
            border: 1px solid var(--glass-border);
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .favorite-button {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 2.5rem;
            cursor: pointer;
            color: var(--favorite-btn-color);
            transition: transform 0.2s ease, color 0.2s ease;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .favorite-button:hover {
            transform: scale(1.1);
            color: var(--favorite-btn-hover);
        }

        .favorite-button.favorited {
            color: var(--favorite-btn-hover);
            text-shadow: 0 0 15px var(--favorite-btn-color);
            transform: scale(1.1);
        }

        .utility-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .utility-buttons .action-button {
            margin-top: 0;
            background-color: var(--share-btn-color);
        }

        .utility-buttons .action-button:hover {
            background-color: var(--share-btn-hover);
        }

        footer {
            margin-top: 40px;
            padding: 15px 30px;
            background-color: var(--footer-bg);
            color: var(--text-color);
            width: 100%;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
            font-size: 0.9rem;
            transition: background-color 0.8s ease, color 0.8s ease;
        }

        /* Category Selector */
        .category-selector {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .category-selector label {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--text-color);
        }

        .category-selector select {
            background-color: var(--category-select-bg);
            color: var(--text-color);
            border: 1px solid var(--category-select-border);
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            appearance: none; /* Remove default dropdown arrow */
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23E0F2F7%22%20d%3D%22M287%2C197.9L159.3%2C69.2c-3.7-3.7-9.7-3.7-13.4%2C0L5.4%2C197.9c-3.7%2C3.7-3.7%2C9.7%2C0%2C13.4l13.4%2C13.4c3.9%2C3.9%2C10.1%2C3.9%2C14%2C0l110.7-110.7l110.7%2C110.7c3.9%2C3.9%2C10.1%2C3.9%2C14%2C0l13.4-13.4C290.7%2C207.6%2C290.7%2C201.6%2C287%2C197.9z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 10px top 50%;
            background-size: 12px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .category-selector select:focus {
            outline: none;
            border-color: var(--main-action-btn-hover);
            box-shadow: 0 0 0 3px rgba(0, 188, 212, 0.3);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
            padding-top: 60px;
        }

        .modal-content {
            background-color: var(--glass-bg);
            margin: 5% auto;
            padding: 30px;
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            width: 80%;
            max-width: 700px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            position: relative;
            color: var(--text-color);
        }

        .modal-content h2 {
            color: var(--title-color);
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: var(--title-shadow);
        }

        .modal-content ul {
            list-style: none;
            padding: 0;
            max-height: 400px;
            overflow-y: auto;
            border-top: 1px solid var(--glass-border);
            padding-top: 15px;
        }

        .modal-content li {
            background-color: rgba(255,255,255,0.05);
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 10px;
            text-align: left;
            font-size: 1.1rem;
            border: 1px solid rgba(255,255,255,0.1);
            transition: background-color 0.3s ease;
        }

        .modal-content li:hover {
            background-color: rgba(255,255,255,0.1);
        }

        .close-button {
            color: var(--text-color);
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-button:hover,
        .close-button:focus {
            color: var(--title-color);
            text-decoration: none;
            cursor: pointer;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            #fact-display {
                font-size: 1.5rem;
            }
            .container {
                padding: 30px;
            }
            .action-button {
                padding: 12px 25px;
                font-size: 1.1rem;
            }
            .utility-buttons {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="theme-indicator">Theme: <span id="current-theme">Mysteries of the Deep Sea</span></div>
        <h1 id="site-title">Mysteries of the Deep Sea</h1>

        <div class="category-selector">
            <label for="fact-category">Category:</label>
            <select id="fact-category">
                <option value="deep-sea">Deep Sea</option>
                <option value="space">Space</option>
                <option value="history">History</option>
                <option value="science">Science</option>
            </select>
        </div>

        <p id="fact-display" class="revealed">The Mariana Trench is deeper than Mount Everest is tall, reaching approximately 11,000 meters (36,000 feet) below the surface.</p>
        <div class="rating-section">
            <div id="popularity-score">Rating: 0</div>
            <div class="rating-buttons">
                <button class="rating-button" id="thumbs-up-btn" title="Like this fact">👍</button>
                <button class="rating-button" id="thumbs-down-btn" title="Dislike this fact">👎</button>
            </div>
        </div>
        <button class="action-button" id="next-fact-btn">Next Fact</button>
        <button class="favorite-button" id="favorite-btn" title="Add to favorites">⭐</button>

        <div class="utility-buttons">
            <button class="action-button" id="share-fact-btn">Share Fact</button>
            <button class="action-button" id="view-history-btn">View History</button>
            <button class="action-button" id="view-favorites-btn">View Favorites</button>
            <button class="action-button" id="fact-of-the-day-btn">Fact of the Day</button>
        </div>
    </div>

    <div id="history-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-history-modal">&times;</span>
            <h2>Fact History</h2>
            <ul id="history-list">
                <!-- History items will be loaded here -->
            </ul>
        </div>
    </div>

    <div id="favorites-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-favorites-modal">&times;</span>
            <h2>Favorite Facts</h2>
            <ul id="favorites-list">
                <!-- Favorite items will be loaded here -->
            </ul>
        </div>
    </div>

    <footer>
        <p>Site will update automatically. Last update: <span id="last-update-time"></span></p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const factDisplay = document.getElementById('fact-display');
            const nextFactBtn = document.getElementById('next-fact-btn');
            const thumbsUpBtn = document.getElementById('thumbs-up-btn');
            const thumbsDownBtn = document.getElementById('thumbs-down-btn');
            const popularityScore = document.getElementById('popularity-score');
            const favoriteBtn = document.getElementById('favorite-btn');
            const shareFactBtn = document.getElementById('share-fact-btn');
            const viewHistoryBtn = document.getElementById('view-history-btn');
            const viewFavoritesBtn = document.getElementById('view-favorites-btn');
            const factOfTheDayBtn = document.getElementById('fact-of-the-day-btn');
            const historyModal = document.getElementById('history-modal');
            const favoritesModal = document.getElementById('favorites-modal');
            const closeHistoryModal = document.getElementById('close-history-modal');
            const closeFavoritesModal = document.getElementById('close-favorites-modal');
            const historyList = document.getElementById('history-list');
            const favoritesList = document.getElementById('favorites-list');
            const lastUpdateTime = document.getElementById('last-update-time');
            const factCategorySelect = document.getElementById('fact-category');

            let currentFact = {
                text: "The Mariana Trench is deeper than Mount Everest is tall, reaching approximately 11,000 meters (36,000 feet) below the surface.",
                category: "deep-sea",
                rating: 0
            };
            let factHistory = [];
            let favoriteFacts = [];

            // Function to update the last update time in the footer
            const updateLastUpdateTime = () => {
                const now = new Date();
                lastUpdateTime.textContent = now.toLocaleString();
            };

            // Initial update
            updateLastUpdateTime();
            // Update every minute (or as desired)
            setInterval(updateLastUpdateTime, 60000);

            const facts = {
                "deep-sea": [
                    "The Mariana Trench is deeper than Mount Everest is tall, reaching approximately 11,000 meters (36,000 feet) below the surface.",
                    "Over 80% of our oceans remain unmapped, unobserved, and unexplored.",
                    "The deepest living fish, the Mariana snailfish, can withstand pressures equivalent to 1,600 elephants standing on a Mini Cooper.",
                    "Hydrothermal vents on the ocean floor can reach temperatures of over 400°C (750°F) but don't boil due to immense pressure.",
                    "The 'twilight zone' (mesopelagic zone) of the ocean, between 200 and 1,000 meters deep, is home to the largest migration of animals on Earth, occurring daily."
                ],
                "space": [
                    "A day on Venus is longer than a year on Venus.",
                    "There are more stars in the universe than grains of sand on all the beaches on Earth.",
                    "The largest known asteroid, Ceres, is also classified as a dwarf planet.",
                    "If you could fly to the nearest star, Proxima Centauri, it would take you about 73,000 years with current spacecraft technology.",
                    "The footprints left on the Moon by Apollo astronauts will likely stay there for at least 100 million years."
                ],
                "history": [
                    "The shortest war in history was between Britain and Zanzibar on August 27, 1896. Zanzibar surrendered after 38 minutes.",
                    "Ancient Romans used to clean and whiten their teeth with a mixture of urine and goat's milk.",
                    "The Great Wall of China is not visible from space with the naked eye, contrary to popular belief.",
                    "The first recorded use of the word 'hello' was in 1827.",
                    "Cleopatra lived closer in time to the invention of the iPhone than to the building of the Great Pyramid of Giza."
                ],
                "science": [
                    "Honey never spoils. Archaeologists have found pots of honey in ancient Egyptian tombs that are over 3,000 years old and still edible.",
                    "A single cloud can weigh more than 1 million pounds.",
                    "The human brain generates about 20 watts of electrical power when awake, enough to light a dim lightbulb.",
                    "Sound travels about 4.3 times faster in water than in air.",
                    "If you unravel all the DNA in your body, it would stretch from the Earth to the Sun and back over 600 times."
                ]
            };

            const getRandomFact = (category) => {
                const categoryFacts = facts[category];
                if (!categoryFacts || categoryFacts.length === 0) {
                    return "No facts available for this category.";
                }
                const randomIndex = Math.floor(Math.random() * categoryFacts.length);
                return categoryFacts[randomIndex];
            };

            const displayFact = (factText, category) => {
                factDisplay.classList.remove('revealed');
                setTimeout(() => {
                    factDisplay.textContent = factText;
                    currentFact = { text: factText, category: category, rating: 0 };
                    popularityScore.textContent = `Rating: ${currentFact.rating}`;
                    thumbsUpBtn.classList.remove('active');
                    thumbsDownBtn.classList.remove('active');
                    favoriteBtn.classList.remove('favorited');
                    factDisplay.classList.add('revealed');
                }, 500); // Delay to allow fade-out animation
            };

            const addFactToHistory = (fact) => {
                factHistory.unshift(fact); // Add to the beginning
                if (factHistory.length > 10) { // Keep history to a reasonable size
                    factHistory.pop();
                }
            };

            nextFactBtn.addEventListener('click', () => {
                addFactToHistory(currentFact);
                const selectedCategory = factCategorySelect.value;
                displayFact(getRandomFact(selectedCategory), selectedCategory);
            });

            thumbsUpBtn.addEventListener('click', () => {
                if (!thumbsUpBtn.classList.contains('active')) {
                    currentFact.rating++;
                    popularityScore.textContent = `Rating: ${currentFact.rating}`;
                    thumbsUpBtn.classList.add('active');
                    thumbsDownBtn.classList.remove('active');
                }
            });

            thumbsDownBtn.addEventListener('click', () => {
                if (!thumbsDownBtn.classList.contains('active')) {
                    currentFact.rating--;
                    popularityScore.textContent = `Rating: ${currentFact.rating}`;
                    thumbsDownBtn.classList.add('active');
                    thumbsUpBtn.classList.remove('active');
                }
            });

            favoriteBtn.addEventListener('click', () => {
                const index = favoriteFacts.findIndex(f => f.text === currentFact.text);
                if (index === -1) {
                    favoriteFacts.push(currentFact);
                    favoriteBtn.classList.add('favorited');
                } else {
                    favoriteFacts.splice(index, 1);
                    favoriteBtn.classList.remove('favorited');
                }
            });

            shareFactBtn.addEventListener('click', () => {
                if (navigator.share) {
                    navigator.share({
                        title: document.title,
                        text: currentFact.text,
                        url: window.location.href
                    }).catch((error) => console.error('Error sharing:', error));
                } else {
                    alert('Sharing not supported on this browser. You can manually copy the fact: ' + currentFact.text);
                }
            });

            const populateModal = (listElement, factsArray) => {
                listElement.innerHTML = '';
                if (factsArray.length === 0) {
                    listElement.innerHTML = '<li>No facts to display.</li>';
                    return;
                }
                factsArray.forEach(fact => {
                    const li = document.createElement('li');
                    li.textContent = fact.text;
                    listElement.appendChild(li);
                });
            };

            viewHistoryBtn.addEventListener('click', () => {
                populateModal(historyList, factHistory);
                historyModal.style.display = 'block';
            });

            viewFavoritesBtn.addEventListener('click', () => {
                populateModal(favoritesList, favoriteFacts);
                favoritesModal.style.display = 'block';
            });

            closeHistoryModal.addEventListener('click', () => {
                historyModal.style.display = 'none';
            });

            closeFavoritesModal.addEventListener('click', () => {
                favoritesModal.style.display = 'none';
            });

            window.addEventListener('click', (event) => {
                if (event.target == historyModal) {
                    historyModal.style.display = 'none';
                }
                if (event.target == favoritesModal) {
                    favoritesModal.style.display = 'none';
                }
            });

            factOfTheDayBtn.addEventListener('click', () => {
                // For simplicity, Fact of the Day will just be a random fact from the current category
                // In a real application, this would involve a backend to serve a consistent fact for the day
                addFactToHistory(currentFact);
                const selectedCategory = factCategorySelect.value;
                displayFact(getRandomFact(selectedCategory), selectedCategory);
                alert("Here's your Fact of the Day!");
            });

            factCategorySelect.addEventListener('change', (event) => {
                addFactToHistory(currentFact); // Add current fact to history before changing category
                const selectedCategory = event.target.value;
                displayFact(getRandomFact(selectedCategory), selectedCategory);
            });

            // Initial fact display on load
            displayFact(currentFact.text, currentFact.category);
        });
    </script>
</body>
</html>